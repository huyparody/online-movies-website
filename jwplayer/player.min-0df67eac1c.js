function _handleMultipleEvents(a,b,c,d){vgplayer.arr.forEach(c,function(c){a(b,c,d)})}function _logType(a,b){var c=Array.prototype.slice.call(b);a?c.unshift(a.toUpperCase()+":"):a="log",vgplayer.log.history.push(c),c.unshift("vgplayer:"),_console[a].apply?_console[a].apply(_console,c):_console[a](c.join(" "))}document.createElement("video"),document.createElement("audio");var vgplayer=function(a,b,c){var d;if("string"==typeof a){if(0===a.indexOf("#")&&(a=a.slice(1)),vgplayer.players[a])return vgplayer.players[a];d=vgplayer.el(a)}else d=a;if(!d||!d.nodeName)throw new TypeError("The element or ID supplied is not valid. (vgplayer)");return d.player||new vgplayer.Player(d,b,c)};vgplayer.options={techOrder:["html5"],html5:{},width:640,height:360,defaultVolume:0,playbackRates:[],playbackRates:[.5,1,1.5,2],children:{mediaLoader:{},posterImage:{},loadingSpinner:{},gradientBackground:{},controlBar:{},errorDisplay:{}},language:document.getElementsByTagName("html")[0].getAttribute("lang")||navigator.languages&&navigator.languages[0]||navigator.userLanguage||navigator.language||"en",languages:{},notSupportedMessage:"Không thể chạy video này."},vgplayer.players={},"function"==typeof define&&define.amd?define([],function(){return vgplayer}):"object"==typeof exports&&"object"==typeof module&&(module.exports=vgplayer),vgplayer.CoreObject=vgplayer.CoreObject=function(){},vgplayer.CoreObject.extend=function(a){var b,c;a=a||{},b=a.init||a.init||this.prototype.init||this.prototype.init||function(){},c=function(){b.apply(this,arguments)},c.prototype=vgplayer.obj.create(this.prototype),c.prototype.constructor=c,c.extend=vgplayer.CoreObject.extend,c.create=vgplayer.CoreObject.create;for(var d in a)a.hasOwnProperty(d)&&(c.prototype[d]=a[d]);return c},vgplayer.CoreObject.create=function(){var a=vgplayer.obj.create(this.prototype);return this.apply(a,arguments),a},vgplayer.on=function(a,b,c){if(vgplayer.obj.isArray(b))return _handleMultipleEvents(vgplayer.on,a,b,c);var d=vgplayer.getData(a);d.handlers||(d.handlers={}),d.handlers[b]||(d.handlers[b]=[]),c.guid||(c.guid=vgplayer.guid++),d.handlers[b].push(c),d.dispatcher||(d.disabled=!1,d.dispatcher=function(b){if(!d.disabled){b=vgplayer.fixEvent(b);var c=d.handlers[b.type];if(c)for(var e=c.slice(0),f=0,g=e.length;g>f&&!b.isImmediatePropagationStopped();f++)e[f].call(a,b)}}),1==d.handlers[b].length&&(a.addEventListener?a.addEventListener(b,d.dispatcher,!1):a.attachEvent&&a.attachEvent("on"+b,d.dispatcher))},vgplayer.off=function(a,b,c){if(vgplayer.hasData(a)){var d=vgplayer.getData(a);if(d.handlers){if(vgplayer.obj.isArray(b))return _handleMultipleEvents(vgplayer.off,a,b,c);var e=function(b){d.handlers[b]=[],vgplayer.cleanUpEvents(a,b)};if(b){var f=d.handlers[b];if(f){if(!c)return void e(b);if(c.guid)for(var g=0;g<f.length;g++)f[g].guid===c.guid&&f.splice(g--,1);vgplayer.cleanUpEvents(a,b)}}else for(var h in d.handlers)e(h)}}},vgplayer.cleanUpEvents=function(a,b){var c=vgplayer.getData(a);0===c.handlers[b].length&&(delete c.handlers[b],a.removeEventListener?a.removeEventListener(b,c.dispatcher,!1):a.detachEvent&&a.detachEvent("on"+b,c.dispatcher)),vgplayer.isEmpty(c.handlers)&&(delete c.handlers,delete c.dispatcher,delete c.disabled),vgplayer.isEmpty(c)&&vgplayer.removeData(a)},vgplayer.fixEvent=function(a){function b(){return!0}function c(){return!1}if(!a||!a.isPropagationStopped){var d=a||window.event;a={};for(var e in d)"layerX"!==e&&"layerY"!==e&&"keyLocation"!==e&&"webkitMovementX"!==e&&"webkitMovementY"!==e&&("returnValue"==e&&d.preventDefault||(a[e]=d[e]));if(a.target||(a.target=a.srcElement||document),a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement,a.preventDefault=function(){d.preventDefault&&d.preventDefault(),a.returnValue=!1,a.isDefaultPrevented=b,a.defaultPrevented=!0},a.isDefaultPrevented=c,a.defaultPrevented=!1,a.stopPropagation=function(){d.stopPropagation&&d.stopPropagation(),a.cancelBubble=!0,a.isPropagationStopped=b},a.isPropagationStopped=c,a.stopImmediatePropagation=function(){d.stopImmediatePropagation&&d.stopImmediatePropagation(),a.isImmediatePropagationStopped=b,a.stopPropagation()},a.isImmediatePropagationStopped=c,null!=a.clientX){var f=document.documentElement,g=document.body;a.pageX=a.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=a.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)}a.which=a.charCode||a.keyCode,null!=a.button&&(a.button=1&a.button?0:4&a.button?1:2&a.button?2:0)}return a},vgplayer.trigger=function(a,b){var c=vgplayer.hasData(a)?vgplayer.getData(a):{},d=a.parentNode||a.ownerDocument;if("string"==typeof b&&(b={type:b,target:a}),b=vgplayer.fixEvent(b),c.dispatcher&&c.dispatcher.call(a,b),d&&!b.isPropagationStopped()&&b.bubbles!==!1)vgplayer.trigger(d,b);else if(!d&&!b.defaultPrevented){var e=vgplayer.getData(b.target);b.target[b.type]&&(e.disabled=!0,"function"==typeof b.target[b.type]&&b.target[b.type](),e.disabled=!1)}return!b.defaultPrevented},vgplayer.one=function(a,b,c){if(vgplayer.obj.isArray(b))return _handleMultipleEvents(vgplayer.one,a,b,c);var d=function(){vgplayer.off(a,b,d),c.apply(this,arguments)};d.guid=c.guid=c.guid||vgplayer.guid++,vgplayer.on(a,b,d)};var hasOwnProp=Object.prototype.hasOwnProperty;vgplayer.createEl=function(a,b){var c;return a=a||"div",b=b||{},c=document.createElement(a),vgplayer.obj.each(b,function(a,b){-1!==a.indexOf("aria-")||"role"==a?c.setAttribute(a,b):c[a]=b}),c},vgplayer.capitalize=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},vgplayer.sendGA=function(a,b,c,d,e){window.ga?ga("send","event",{eventCategory:a,eventAction:b,eventLabel:c,eventValue:e,nonInteraction:d,hitCallbackTimeout:500,hitCallback:function(){},hitCallbackFail:function(){console.log("Unable to send Google Analytics data")}}):window._gaq?_gaq.push(["_trackEvent",a,b,c,e,d]):console.log("Google Analytics not detected")},vgplayer.buildContextMenu=function(a){var b=vgplayer.el("dropdown-context");if(!a.options_.video_id)return a.dispose(),!1;if(contextMenuCreateEl=function(a){var b=vgplayer.createEl("div",{className:"context-menu-item",innerHTML:a.label});return a.url&&(b.onclick=function(){window.open(a.url)}),b},null!==b);else{for(var b=vgplayer.createEl("div",{id:"dropdown-context",className:"context-menu"}),c=vgplayer.createEl("div",{className:"context-menu-header",innerHTML:"VEPlayer © 2016, 1.6"}),d=vgplayer.createEl("div",{className:"context-menu-body"}),e=[],f=0;f<e.length;f++)d.appendChild(contextMenuCreateEl(e[f]));b.appendChild(c),document.body.appendChild(b)}b.oncontextmenu=function(a){a.preventDefault(),a.stopPropagation()},a.el_.oncontextmenu=function(c){c.preventDefault(),c.stopPropagation();var d=c.pageY,e=c.pageX,f=b.clientHeight+a.controlBar.el_.clientHeight;c.pageY+f>a.el_.clientHeight+a.el_.getBoundingClientRect().top&&(d=c.pageY-b.clientHeight),c.pageX+b.clientWidth>a.el_.clientWidth+a.el_.getBoundingClientRect().left&&(e=c.pageX-b.clientWidth),b.setAttribute("style","height: "+b.clientHeight+"px; top: "+d+"px; left: "+e+"px; display: block; font-size: 10px; font-family: Arial, sans-serif;")},document.onclick=function(a){try{if(3===a.which)return!1}catch(a){}try{b.parentNode.removeChild(b)}catch(a){}}},vgplayer.obj={},vgplayer.obj.create=Object.create||function(a){function b(){}return b.prototype=a,new b},vgplayer.obj.each=function(a,b,c){for(var d in a)hasOwnProp.call(a,d)&&b.call(c||this,d,a[d])},vgplayer.obj.merge=function(a,b){if(!b)return a;for(var c in b)hasOwnProp.call(b,c)&&(a[c]=b[c]);return a},vgplayer.obj.deepMerge=function(a,b){var c,d,e;a=vgplayer.obj.copy(a);for(c in b)hasOwnProp.call(b,c)&&(d=a[c],e=b[c],vgplayer.obj.isPlain(d)&&vgplayer.obj.isPlain(e)?a[c]=vgplayer.obj.deepMerge(d,e):a[c]=b[c]);return a},vgplayer.obj.copy=function(a){return vgplayer.obj.merge({},a)},vgplayer.obj.isPlain=function(a){return!!a&&"object"==typeof a&&"[object Object]"===a.toString()&&a.constructor===Object},vgplayer.obj.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},vgplayer.bind=function(a,b,c){b.guid||(b.guid=vgplayer.guid++);var d=function(){return b.apply(a,arguments)};return d.guid=c?c+"_"+b.guid:b.guid,d},vgplayer.cache={},vgplayer.guid=1,vgplayer.expando="vdata"+(new Date).getTime(),vgplayer.getData=function(a){var b=a[vgplayer.expando];return b||(b=a[vgplayer.expando]=vgplayer.guid++,vgplayer.cache[b]={}),vgplayer.cache[b]},vgplayer.hasData=function(a){var b=a[vgplayer.expando];return!(!b||vgplayer.isEmpty(vgplayer.cache[b]))},vgplayer.removeData=function(a){var b=a[vgplayer.expando];if(b){delete vgplayer.cache[b];try{delete a[vgplayer.expando]}catch(c){a.removeAttribute?a.removeAttribute(vgplayer.expando):a[vgplayer.expando]=null}}},vgplayer.isEmpty=function(a){for(var b in a)if(null!==a[b])return!1;return!0},vgplayer.addClass=function(a,b){-1==(" "+a.className+" ").indexOf(" "+b+" ")&&(a.className=""===a.className?b:a.className+" "+b)},vgplayer.removeClass=function(a,b){var c,d;if(-1!=a.className.indexOf(b)){for(c=a.className.split(" "),d=c.length-1;d>=0;d--)c[d]===b&&c.splice(d,1);a.className=c.join(" ")}},vgplayer.TEST_VID=vgplayer.createEl("video"),vgplayer.USER_AGENT=navigator.userAgent,vgplayer.IS_IPHONE=/iPhone/i.test(vgplayer.USER_AGENT),vgplayer.IS_IPAD=/iPad/i.test(vgplayer.USER_AGENT),vgplayer.IS_IPOD=/iPod/i.test(vgplayer.USER_AGENT),vgplayer.IS_IOS=vgplayer.IS_IPHONE||vgplayer.IS_IPAD||vgplayer.IS_IPOD,vgplayer.IOS_VERSION=function(){var a=vgplayer.USER_AGENT.match(/OS (\d+)_/i);return a&&a[1]?a[1]:void 0}(),vgplayer.IS_ANDROID=/Android/i.test(vgplayer.USER_AGENT),vgplayer.ANDROID_VERSION=function(){var a,b,c=vgplayer.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);return c?(a=c[1]&&parseFloat(c[1]),b=c[2]&&parseFloat(c[2]),a&&b?parseFloat(c[1]+"."+c[2]):a?a:null):null}(),vgplayer.IS_OLD_ANDROID=vgplayer.IS_ANDROID&&/webkit/i.test(vgplayer.USER_AGENT)&&vgplayer.ANDROID_VERSION<2.3,vgplayer.IS_FIREFOX=/Firefox/i.test(vgplayer.USER_AGENT),vgplayer.IS_CHROME=/Chrome/i.test(vgplayer.USER_AGENT),vgplayer.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),vgplayer.setElementAttributes=function(a,b){vgplayer.obj.each(b,function(b,c){null===c||"undefined"==typeof c||c===!1?a.removeAttribute(b):a.setAttribute(b,c===!0?"":c)})},vgplayer.getElementAttributes=function(a){var b,c,d,e,f;if(b={},c=",autoplay,controls,loop,muted,default,",a&&a.attributes&&a.attributes.length>0){d=a.attributes;for(var g=d.length-1;g>=0;g--)e=d[g].name,f=d[g].value,"boolean"!=typeof a[e]&&-1===c.indexOf(","+e+",")||(f=null!==f),b[e]=f}return b},vgplayer.getComputedDimension=function(a,b){var c="";return document.defaultView&&document.defaultView.getComputedStyle?c=document.defaultView.getComputedStyle(a,"").getPropertyValue(b):a.currentStyle&&(c=a["client"+b.substr(0,1).toUpperCase()+b.substr(1)]+"px"),c},vgplayer.insertFirst=function(a,b){b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)},vgplayer.browser={},vgplayer.el=function(a){return 0===a.indexOf("#")&&(a=a.slice(1)),document.getElementById(a)},vgplayer.formatTime=function(a,b){b=b||a;var c=Math.floor(a%60),d=Math.floor(a/60%60),e=Math.floor(a/3600),f=Math.floor(b/60%60),g=Math.floor(b/3600);return(isNaN(a)||a===1/0)&&(e=d=c="-"),e=e>0||g>0?e+":":"",d=((e||f>=10)&&10>d?"0"+d:d)+":",c=10>c?"0"+c:c,e+d+c},vgplayer.blockTextSelection=function(){document.body.focus(),document.onselectstart=function(){return!1}},vgplayer.unblockTextSelection=function(){document.onselectstart=function(){return!0}},vgplayer.trim=function(a){return(a+"").replace(/^\s+|\s+$/g,"")},vgplayer.round=function(a,b){return b||(b=0),Math.round(a*Math.pow(10,b))/Math.pow(10,b)},vgplayer.createTimeRange=function(a,b){return{length:1,start:function(){return a},end:function(){return b}}},vgplayer.get=function(a,b,c,d,e){var f,g,h,i,j;c=c||function(){},"undefined"==typeof XMLHttpRequest&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(b){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(c){}throw new Error("This browser does not support XMLHttpRequest.")}),g=new XMLHttpRequest,h=vgplayer.parseUrl(a),i=window.location,j=h.protocol+h.host!==i.protocol+i.host,!j||!window.XDomainRequest||"withCredentials"in g?(f="file:"==h.protocol||"file:"==i.protocol,g.onreadystatechange=function(){4===g.readyState&&(200===g.status||f&&0===g.status?b(g.responseText):c(g.responseText))}):(g=new window.XDomainRequest,g.onload=function(){b(g.responseText)},g.onerror=c,g.onprogress=function(){},g.ontimeout=c);try{g.open("GET",a,!0),d&&(g.withCredentials=!0)}catch(k){return void c(k)}try{g.send()}catch(k){c(k)}e&&setTimeout(function(){g.abort()},e)},vgplayer.setLocalStorage=function(a,b){try{var c=window.localStorage||!1;if(!c)return;c[a]=b}catch(d){22==d.code||1014==d.code?vgplayer.log("LocalStorage Full (vgplayer)",d):18==d.code?vgplayer.log("LocalStorage not allowed (vgplayer)",d):vgplayer.log("LocalStorage Error (vgplayer)",d)}},vgplayer.getAbsoluteURL=function(a){return a.match(/^https?:\/\//)||(a=vgplayer.createEl("div",{innerHTML:'<a href="'+a+'">x</a>'}).firstChild.href),a},vgplayer.parseUrl=function(a){var b,c,d,e,f;e=["protocol","hostname","port","pathname","search","hash","host"],c=vgplayer.createEl("a",{href:a}),d=""===c.host&&"file:"!==c.protocol,d&&(b=vgplayer.createEl("div"),b.innerHTML='<a href="'+a+'"></a>',c=b.firstChild,b.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(b)),f={};for(var g=0;g<e.length;g++)f[e[g]]=c[e[g]];return d&&document.body.removeChild(b),f};var _noop=function(){},_console=window.console||{log:_noop,warn:_noop,error:_noop};vgplayer.log=function(){_logType(null,arguments)},vgplayer.log.history=[],vgplayer.log.error=function(){_logType("error",arguments)},vgplayer.log.warn=function(){_logType("warn",arguments)},vgplayer.findPosition=function(a){var b,c,d,e,f,g,h,i,j;return a.getBoundingClientRect&&a.parentNode&&(b=a.getBoundingClientRect()),b?(c=document.documentElement,d=document.body,e=c.clientLeft||d.clientLeft||0,f=window.pageXOffset||d.scrollLeft,g=b.left+f-e,h=c.clientTop||d.clientTop||0,i=window.pageYOffset||d.scrollTop,j=b.top+i-h,{left:vgplayer.round(g),top:vgplayer.round(j)}):{left:0,top:0}},vgplayer.arr={},vgplayer.arr.forEach=function(a,b,c){if(vgplayer.obj.isArray(a)&&b instanceof Function)for(var d=0,e=a.length;e>d;++d)b.call(c||vgplayer,a[d],d,a);return a},vgplayer.util={},vgplayer.util.mergeOptions=function(a,b){var c,d,e;a=vgplayer.obj.copy(a);for(c in b)b.hasOwnProperty(c)&&(d=a[c],e=b[c],vgplayer.obj.isPlain(d)&&vgplayer.obj.isPlain(e)?a[c]=vgplayer.util.mergeOptions(d,e):a[c]=b[c]);return a},vgplayer.Component=vgplayer.CoreObject.extend({init:function(a,b,c){this.player_=a,this.options_=vgplayer.obj.copy(this.options_),b=this.options(b),this.id_=b.id||(b.el&&b.el.id?b.el.id:a.id()+"_component_"+vgplayer.guid++),this.name_=b.name||null,this.el_=b.el||this.createEl(),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.initChildren(),this.ready(c),b.reportTouchActivity!==!1&&this.enableTouchActivity()}}),vgplayer.Component.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var a=this.children_.length-1;a>=0;a--)this.children_[a].dispose&&this.children_[a].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.off(),this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),vgplayer.removeData(this.el_),this.el_=null},vgplayer.Component.prototype.player_=!0,vgplayer.Component.prototype.player=function(){return this.player_},vgplayer.Component.prototype.options_,vgplayer.Component.prototype.options=function(a){return void 0===a?this.options_:this.options_=vgplayer.util.mergeOptions(this.options_,a)},vgplayer.Component.prototype.el_,vgplayer.Component.prototype.createEl=function(a,b){return vgplayer.createEl(a,b)},vgplayer.Component.prototype.el=function(){return this.el_},vgplayer.Component.prototype.contentEl_,vgplayer.Component.prototype.contentEl=function(){return this.contentEl_||this.el_},vgplayer.Component.prototype.id_,vgplayer.Component.prototype.id=function(){return this.id_},vgplayer.Component.prototype.name_,vgplayer.Component.prototype.name=function(){return this.name_},vgplayer.Component.prototype.children_,vgplayer.Component.prototype.children=function(){return this.children_},vgplayer.Component.prototype.childIndex_,vgplayer.Component.prototype.getChildById=function(a){return this.childIndex_[a]},vgplayer.Component.prototype.childNameIndex_,vgplayer.Component.prototype.getChild=function(a){return this.childNameIndex_[a]},vgplayer.Component.prototype.addChild=function(a,b){var c,d,e;return"string"==typeof a?(e=a,b=b||{},d=b.componentClass||vgplayer.capitalize(e),b.name=e,c=new window.vgplayer[d](this.player_||this,b)):c=a,this.children_.push(c),"function"==typeof c.id&&(this.childIndex_[c.id()]=c),e=e||c.name&&c.name(),e&&(this.childNameIndex_[e]=c),"function"==typeof c.el&&c.el()&&this.contentEl().appendChild(c.el()),c},vgplayer.Component.prototype.removeChild=function(a){if("string"==typeof a&&(a=this.getChild(a)),a&&this.children_){for(var b=!1,c=this.children_.length-1;c>=0;c--)if(this.children_[c]===a){b=!0,this.children_.splice(c,1);break}if(b){this.childIndex_[a.id]=null,this.childNameIndex_[a.name]=null;var d=a.el();d&&d.parentNode===this.contentEl()&&this.contentEl().removeChild(a.el())}}},vgplayer.Component.prototype.initChildren=function(){var a,b,c,d,e;if(a=this,b=this.options().children)if(vgplayer.obj.isArray(b))for(var f=0;f<b.length;f++)c=b[f],"string"==typeof c?(d=c,e={}):(d=c.name,e=c),a[d]=a.addChild(d,e);else vgplayer.obj.each(b,function(b,c){c!==!1&&(a[b]=a.addChild(b,c))})},vgplayer.Component.prototype.buildCSSClass=function(){return""},vgplayer.Component.prototype.on=function(a,b){return vgplayer.on(this.el_,a,vgplayer.bind(this,b)),this},vgplayer.Component.prototype.off=function(a,b){return vgplayer.off(this.el_,a,b),this},vgplayer.Component.prototype.one=function(a,b){return vgplayer.one(this.el_,a,vgplayer.bind(this,b)),this},vgplayer.Component.prototype.trigger=function(a){return vgplayer.trigger(this.el_,a),this},vgplayer.Component.prototype.isReady_,vgplayer.Component.prototype.isReadyOnInitFinish_=!0,vgplayer.Component.prototype.readyQueue_,vgplayer.Component.prototype.ready=function(a){return a&&(this.isReady_?a.call(this):(void 0===this.readyQueue_&&(this.readyQueue_=[]),this.readyQueue_.push(a))),this},vgplayer.Component.prototype.triggerReady=function(){this.isReady_=!0;var a=this.readyQueue_;if(a&&a.length>0){for(var b=0,c=a.length;c>b;b++)a[b].call(this);this.readyQueue_=[],this.trigger("ready")}},vgplayer.Component.prototype.addClass=function(a){return vgplayer.addClass(this.el_,a),this},vgplayer.Component.prototype.removeClass=function(a){return vgplayer.removeClass(this.el_,a),this},vgplayer.Component.prototype.show=function(){return this.el_.style.display="block",this},vgplayer.Component.prototype.hide=function(){return this.el_.style.display="none",this},vgplayer.Component.prototype.lockShowing=function(){return this.addClass("vgplayer-lock-showing"),this},vgplayer.Component.prototype.unlockShowing=function(){return this.removeClass("vgplayer-lock-showing"),this},vgplayer.Component.prototype.disable=function(){this.hide(),this.show=function(){}},vgplayer.Component.prototype.width=function(a,b){return this.dimension("width",a,b)},vgplayer.Component.prototype.height=function(a,b){return this.dimension("height",a,b)},vgplayer.Component.prototype.dimensions=function(a,b){return this.width(a,!0).height(b)},vgplayer.Component.prototype.dimension=function(a,b,c){if(void 0!==b)return-1!==(""+b).indexOf("%")||-1!==(""+b).indexOf("px")?this.el_.style[a]=b:"auto"===b?this.el_.style[a]="":this.el_.style[a]=b+"px",c||this.trigger("resize"),this;if(!this.el_)return 0;var d=this.el_.style[a],e=d.indexOf("px");return-1!==e?parseInt(d.slice(0,e),10):parseInt(this.el_["offset"+vgplayer.capitalize(a)],10)},vgplayer.Component.prototype.onResize,vgplayer.Component.prototype.emitTapEvents=function(){var a,b,c,d,e,f,g,h,i;a=0,b=null,i=22,this.on("touchstart",function(c){1===c.touches.length&&(b=c.touches[0],a=(new Date).getTime(),d=!0)}),this.on("touchmove",function(a){a.touches.length>1?d=!1:b&&(f=a.touches[0].pageX-b.pageX,g=a.touches[0].pageY-b.pageY,h=Math.sqrt(f*f+g*g),h>i&&(d=!1))}),e=function(){d=!1},this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){b=null,d===!0&&(c=(new Date).getTime()-a,250>c&&(e.preventDefault(),this.trigger("tap")))})},vgplayer.Component.prototype.enableTouchActivity=function(){var a,b,c;a=vgplayer.bind(this.player(),this.player().reportUserActivity),this.on("touchstart",function(){a(),clearInterval(b),b=setInterval(a,250)}),c=function(c){a(),clearInterval(b)},this.on("touchmove",a),this.on("touchend",c),this.on("touchcancel",c)},vgplayer.Button=vgplayer.Component.extend({init:function(a,b){vgplayer.Component.call(this,a,b),this.emitTapEvents(),this.on("tap",this.onClick),this.on("click",this.onClick),this.on("blur",this.onBlur),this.on("mouseover",this.onMouseOver),this.on("mouseout",this.onMouseOut)}}),vgplayer.Button.prototype.createEl=function(a,b){var c;return b=vgplayer.obj.merge({className:this.buildCSSClass(),role:"button","aria-live":"polite",tabIndex:0},b),c=vgplayer.Component.prototype.createEl.call(this,a,b),b.innerHTML||(this.contentEl_=vgplayer.createEl("div",{className:"vgplayer-control-content"}),this.controlText_=vgplayer.createEl("span",{className:"vgplayer-control-text",innerHTML:this.buttonText||"Need Text"}),this.contentEl_.appendChild(this.controlText_),c.appendChild(this.contentEl_)),c},vgplayer.Button.prototype.buildCSSClass=function(){return"vgplayer-control "+vgplayer.Component.prototype.buildCSSClass.call(this)},vgplayer.Button.prototype.onClick=function(){},vgplayer.Button.prototype.onFocus=function(){vgplayer.on(document,"keyup",vgplayer.bind(this,this.onKeyPress))},vgplayer.Button.prototype.onKeyPress=function(a){32!=a.which&&13!=a.which||(a.preventDefault(),this.onClick())},vgplayer.Button.prototype.onBlur=function(){vgplayer.off(document,"keyup",vgplayer.bind(this,this.onKeyPress))},vgplayer.Button.prototype.onMouseOver=function(){},vgplayer.Button.prototype.onMouseOut=function(){},vgplayer.Slider=vgplayer.Component.extend({init:function(a,b){vgplayer.Component.call(this,a,b),this.bar=this.getChild(this.options_.barName),this.handle=this.getChild(this.options_.handleName),this.on("mousedown",this.onMouseDown),this.on("touchstart",this.onMouseDown),this.on("focus",this.onFocus),this.on("blur",this.onBlur),this.on("click",this.onClick),this.on("mouseover",this.onMouseOver),this.on("mouseout",this.onMouseOut),this.player_.on("controlsvisible",vgplayer.bind(this,this.update)),a.on(this.playerEvent,vgplayer.bind(this,this.update)),this.boundEvents={},this.boundEvents.move=vgplayer.bind(this,this.onMouseMove),this.boundEvents.end=vgplayer.bind(this,this.onMouseUp)}}),vgplayer.Slider.prototype.createEl=function(a,b){return b=b||{},b.className=b.className+" vgplayer-slider",b=vgplayer.obj.merge({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},b),vgplayer.Component.prototype.createEl.call(this,a,b)},vgplayer.Slider.prototype.onMouseDown=function(a){a.preventDefault(),vgplayer.blockTextSelection(),this.addClass("vgplayer-sliding"),vgplayer.on(document,"mousemove",this.boundEvents.move),vgplayer.on(document,"mouseup",this.boundEvents.end),vgplayer.on(document,"touchmove",this.boundEvents.move),vgplayer.on(document,"touchend",this.boundEvents.end),this.onMouseMove(a)},vgplayer.Slider.prototype.onMouseMove=function(){},vgplayer.Slider.prototype.onMouseOver=function(){},vgplayer.Slider.prototype.onMouseOut=function(){},vgplayer.Slider.prototype.onMouseUp=function(){vgplayer.unblockTextSelection(),this.removeClass("vgplayer-sliding"),vgplayer.off(document,"mousemove",this.boundEvents.move,!1),vgplayer.off(document,"mouseup",this.boundEvents.end,!1),vgplayer.off(document,"touchmove",this.boundEvents.move,!1),vgplayer.off(document,"touchend",this.boundEvents.end,!1),this.update()},vgplayer.Slider.prototype.update=function(){if(this.el_){var a,b=this.getPercent(),c=this.handle,d=this.bar;if(isNaN(b)&&(b=0),a=b,c){var e=this.el_,f=e.offsetWidth,g=c.el().offsetWidth,h=g?g/f:0,i=1-h,j=b*i;c.el().style.left=vgplayer.round(100*j,2)+"%"}d&&(d.el().style.width=vgplayer.round(100*a,2)+"%")}},vgplayer.Slider.prototype.calculateDistance=function(a){var b,c,d,e,f,g,h,i,j;if(b=this.el_,c=vgplayer.findPosition(b),f=g=b.offsetWidth,h=this.handle,this.options().vertical){if(e=c.top,j=a.changedTouches?a.changedTouches[0].pageY:a.pageY,h){var k=h.el().offsetHeight;e+=k/2,g-=k}return Math.max(0,Math.min(1,(e-j+g)/g))}if(d=c.left,i=a.changedTouches?a.changedTouches[0].pageX:a.pageX,h){var l=h.el().offsetWidth;d+=l/2,f-=l}return Math.max(0,Math.min(1,(i-d)/f))},vgplayer.Slider.prototype.onFocus=function(){vgplayer.on(document,"keyup",vgplayer.bind(this,this.onKeyPress))},vgplayer.Slider.prototype.onKeyPress=function(a){37==a.which||40==a.which?(a.preventDefault(),this.stepBack()):38!=a.which&&39!=a.which||(a.preventDefault(),this.stepForward())},vgplayer.Slider.prototype.onBlur=function(){vgplayer.off(document,"keyup",vgplayer.bind(this,this.onKeyPress))},vgplayer.Slider.prototype.onClick=function(a){a.stopImmediatePropagation(),a.preventDefault()},vgplayer.SliderHandle=vgplayer.Component.extend(),vgplayer.SliderHandle.prototype.defaultValue=0,vgplayer.SliderHandle.prototype.createEl=function(a,b){return b=b||{},b.className=b.className+" vgplayer-slider-handle",b=vgplayer.obj.merge({innerHTML:'<span class="vgplayer-control-text">'+this.defaultValue+"</span>"},b),vgplayer.Component.prototype.createEl.call(this,"div",b)},vgplayer.Menu=vgplayer.Component.extend(),vgplayer.Menu.prototype.addItem=function(a){this.addChild(a),a.on("click",vgplayer.bind(this,function(){this.unlockShowing()}))},vgplayer.Menu.prototype.createEl=function(){var a=this.options().contentElType||"ul";this.contentEl_=vgplayer.createEl(a,{className:"vgplayer-menu-content"});var b=vgplayer.Component.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vgplayer-menu"});return b.appendChild(this.contentEl_),vgplayer.on(b,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),b},vgplayer.MenuItem=vgplayer.Button.extend({init:function(a,b){vgplayer.Button.call(this,a,b),this.selected(b.selected)}}),vgplayer.MenuItem.prototype.createEl=function(a,b){return vgplayer.Button.prototype.createEl.call(this,"li",vgplayer.obj.merge({className:"vgplayer-menu-item",innerHTML:this.options_.label},b))},vgplayer.MenuItem.prototype.onClick=function(){this.selected(!0)},vgplayer.MenuItem.prototype.selected=function(a){a?(this.addClass("vgplayer-selected"),this.el_.setAttribute("aria-selected",!0)):(this.removeClass("vgplayer-selected"),this.el_.setAttribute("aria-selected",!1))},vgplayer.MenuButton=vgplayer.Button.extend({init:function(a,b){vgplayer.Button.call(this,a,b),this.menu=this.createMenu(),this.addChild(this.menu),this.items&&0===this.items.length&&this.hide(),this.on("keyup",this.onKeyPress),this.el_.setAttribute("aria-haspopup",!0),this.el_.setAttribute("role","button")}}),vgplayer.MenuButton.prototype.buttonPressed_=!1,vgplayer.MenuButton.prototype.createMenu=function(){var a=new vgplayer.Menu(this.player_);if(this.options().title&&a.contentEl().appendChild(vgplayer.createEl("li",{className:"vgplayer-menu-title",innerHTML:vgplayer.capitalize(this.options().title),tabindex:-1})),this.items=this.createItems(),this.items)for(var b=0;b<this.items.length;b++)a.addItem(this.items[b]);return a},vgplayer.MenuButton.prototype.createItems=function(){},vgplayer.MenuButton.prototype.buildCSSClass=function(){return this.className+" vgplayer-menu-button "+vgplayer.Button.prototype.buildCSSClass.call(this)},vgplayer.MenuButton.prototype.onFocus=function(){},vgplayer.MenuButton.prototype.onBlur=function(){},vgplayer.MenuButton.prototype.onClick=function(){this.one("mouseout",vgplayer.bind(this,function(){this.menu.unlockShowing(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},vgplayer.MenuButton.prototype.onKeyPress=function(a){a.preventDefault(),32==a.which||13==a.which?this.buttonPressed_?this.unpressButton():this.pressButton():27==a.which&&this.buttonPressed_&&this.unpressButton()},vgplayer.MenuButton.prototype.pressButton=function(){this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-pressed",!0),this.items&&this.items.length>0&&this.items[0].el().focus()},vgplayer.MenuButton.prototype.unpressButton=function(){this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-pressed",!1)},vgplayer.MediaError=function(a){"number"==typeof a?this.code=a:"string"==typeof a?this.message=a:"object"==typeof a&&vgplayer.obj.merge(this,a),this.message||(this.message=vgplayer.MediaError.defaultMessages[this.code]||"")},vgplayer.MediaError.prototype.code=0,vgplayer.MediaError.prototype.message="",vgplayer.MediaError.prototype.status=null,vgplayer.MediaError.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],vgplayer.MediaError.defaultMessages={0:"Không thể phát video này!",1:"Bạn đã hủy bỏ việc tải video.",2:"Đường truyền lỗi, hãy bấm nút reload trên player để tải lại.",3:"Lỗi video không đúng định dạng, hãy báo với người quản lý nhé!",4:"Video bị lỗi hoặc bị chặn, thử tải lại trang nhé!",5:'Video này đã được mã hóa, cần có "key" để giải mã.'};for(var errNum=0;errNum<vgplayer.MediaError.errorTypes.length;errNum++)vgplayer.MediaError[vgplayer.MediaError.errorTypes[errNum]]=errNum,vgplayer.MediaError.prototype[vgplayer.MediaError.errorTypes[errNum]]=errNum;!function(){var a,b,c,d;for(vgplayer.browser.fullscreenAPI,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],b=a[0],d=0;d<a.length;d++)if(a[d][1]in document){c=a[d];break}if(c)for(vgplayer.browser.fullscreenAPI={},d=0;d<c.length;d++)vgplayer.browser.fullscreenAPI[b[d]]=c[d]}(),vgplayer.Player=vgplayer.Component.extend({init:function(a,b,c){this.tag=a,a.id=a.id||"vgplayer_video_"+vgplayer.guid++,this.tagAttributes=a&&vgplayer.getElementAttributes(a),b=vgplayer.obj.merge(this.getTagSettings(a),b),this.language_=b.language||vgplayer.options.language,this.languages_=b.languages||vgplayer.options.languages,this.cache_={},this.data_=b.data,this.poster_=b.poster,this.controls_=b.controls,a.controls=!1,b.reportTouchActivity=!1,vgplayer.Component.call(this,this,b,c),this.controls()?this.addClass("vgplayer-controls-enabled"):this.addClass("vgplayer-controls-disabled"),vgplayer.players[this.id_]=this,b.plugins&&vgplayer.obj.each(b.plugins,function(a,b){this[a](b)},this),this.listenForUserActivity()}}),vgplayer.Player.prototype.language_,vgplayer.Player.prototype.language=function(a){return void 0===a?this.language_:(this.language_=a,this)},vgplayer.Player.prototype.languages_,vgplayer.Player.prototype.languages=function(){return this.languages_},vgplayer.Player.prototype.options_=vgplayer.options,vgplayer.Player.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),
vgplayer.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.stopTrackingProgress(),this.stopTrackingCurrentTime(),this.tech&&this.tech.dispose(),vgplayer.Component.prototype.dispose.call(this)},vgplayer.Player.prototype.getTagSettings=function(a){var b={sources:[],tracks:[]};if(vgplayer.obj.merge(b,vgplayer.getElementAttributes(a)),a.hasChildNodes()){var c,d,e,f,g;for(c=a.childNodes,f=0,g=c.length;g>f;f++)if(d=c[f],e=d.nodeName.toLowerCase(),"source"===e){var h=vgplayer.getElementAttributes(d);b.sources.push(h)}else"track"===e&&b.tracks.push(vgplayer.getElementAttributes(d))}return b},vgplayer.Player.prototype.createEl=function(){var a,b=this.el_=vgplayer.Component.prototype.createEl.call(this,"div"),c=this.tag;if(c.removeAttribute("width"),c.removeAttribute("height"),c.hasChildNodes()){var d,e,f,g,h,i;for(d=c.childNodes,e=d.length,i=[];e--;)g=d[e],h=g.nodeName.toLowerCase(),"track"===h&&i.push(g);for(f=0;f<i.length;f++)c.removeChild(i[f])}return a=vgplayer.getElementAttributes(c),vgplayer.obj.each(a,function(c){b.setAttribute(c,a[c])}),c.id+="_html5_api",c.className="vgplayer-tech",c.player=b.player=this,this.addClass("vgplayer-paused"),this.width(this.options_.width,!0),this.height(this.options_.height,!0),c.parentNode&&c.parentNode.insertBefore(b,c),vgplayer.insertFirst(c,b),this.el_=b,this.on("loadstart",this.onLoadStart),this.on("waiting",this.onWaiting),this.on(["canplay","canplaythrough","playing","ended"],this.onWaitEnd),this.on("seeking",this.onSeeking),this.on("seeked",this.onSeeked),this.on("ended",this.onEnded),this.on("play",this.onPlay),this.on("firstplay",this.onFirstPlay),this.on("pause",this.onPause),this.on("progress",this.onProgress),this.on("durationchange",this.onDurationChange),this.on("fullscreenchange",this.onFullscreenChange),b},vgplayer.Player.prototype.loadTech=function(a,b){this.tech&&this.unloadTech(),"Html5"!==a&&this.tag&&(vgplayer.Html5.disposeMediaElement(this.tag),this.tag=null),this.techName=a,this.isReady_=!1;var c=function(){this.player_.triggerReady(),this.features.progressEvents||this.player_.manualProgressOn(),this.features.timeupdateEvents||this.player_.manualTimeUpdatesOn()},d=vgplayer.obj.merge({source:b,parentEl:this.el_},this.options_[a.toLowerCase()]);b?(this.currentType_=b.type,b.src==this.cache_.src&&this.cache_.currentTime>0&&(d.startTime=this.cache_.currentTime),this.cache_.src=b.src,this.cache_.quality=b.quality):this.error({code:4,message:this.options().notSupportedMessage}),this.tech=new window.vgplayer[a](this,d),this.tech.ready(c)},vgplayer.Player.prototype.unloadTech=function(){this.isReady_=!1,this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),this.tech.dispose(),this.tech=!1},vgplayer.Player.prototype.manualProgressOn=function(){this.manualProgress=!0,this.trackProgress(),this.tech&&this.tech.one("progress",function(){this.features.progressEvents=!0,this.player_.manualProgressOff()})},vgplayer.Player.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress()},vgplayer.Player.prototype.trackProgress=function(){this.progressInterval=setInterval(vgplayer.bind(this,function(){var a=this.bufferedPercent();this.cache_.bufferedPercent!=a&&this.trigger("progress"),this.cache_.bufferedPercent=a,1==a&&this.stopTrackingProgress()}),500)},vgplayer.Player.prototype.stopTrackingProgress=function(){clearInterval(this.progressInterval)},vgplayer.Player.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime),this.tech&&this.tech.one("timeupdate",function(){this.features.timeupdateEvents=!0,this.player_.manualTimeUpdatesOff()})},vgplayer.Player.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},vgplayer.Player.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=setInterval(vgplayer.bind(this,function(){this.trigger("timeupdate")}),250)},vgplayer.Player.prototype.stopTrackingCurrentTime=function(){clearInterval(this.currentTimeInterval),this.trigger("timeupdate")},vgplayer.Player.prototype.onLoadStart=function(){this.error(null),this.paused()?(this.hasStarted(!1),this.one("play",function(){this.hasStarted(!0)})):this.trigger("firstplay")},vgplayer.Player.prototype.hasStarted_=!1,vgplayer.Player.prototype.hasStarted=function(a){return void 0!==a?(this.hasStarted_!==a&&(this.hasStarted_=a,a?(this.addClass("vgplayer-has-started"),this.trigger("firstplay")):this.removeClass("vgplayer-has-started")),this):this.hasStarted_},vgplayer.Player.prototype.onLoadedMetaData,vgplayer.Player.prototype.onLoadedData,vgplayer.Player.prototype.onLoadedAllData,vgplayer.Player.prototype.onPlay=function(){this.removeClass("vgplayer-paused"),this.addClass("vgplayer-playing");try{window.clearInterval(this.cache_.interval);var a=document.getElementById("next-video");this.el().removeChild(a)}catch(b){}},vgplayer.Player.prototype.onWaiting=function(){this.addClass("vgplayer-waiting")},vgplayer.Player.prototype.onWaitEnd=function(){this.removeClass("vgplayer-waiting")},vgplayer.Player.prototype.onSeeking=function(){this.addClass("vgplayer-seeking")},vgplayer.Player.prototype.onSeeked=function(){this.removeClass("vgplayer-seeking");try{window.clearInterval(this.cache_.interval);var a=document.getElementById("next-video");this.el().removeChild(a)}catch(b){}},vgplayer.Player.prototype.onFirstPlay=function(){this.options_.starttime&&this.currentTime(this.options_.starttime),this.addClass("vgplayer-has-started")},vgplayer.Player.prototype.onPause=function(){this.removeClass("vgplayer-playing"),this.addClass("vgplayer-paused")},vgplayer.Player.prototype.onTimeUpdate,vgplayer.Player.prototype.onProgress=function(){1==this.bufferedPercent()&&this.trigger("loadedalldata")},vgplayer.Player.prototype.onEnded=function(){if(this.options_.loop)this.currentTime(0),this.play();else{var a=!!window.localStorage;if(a&&(autoNext=window.localStorage.getItem("autoNext")),void 0!==autoNext&&"false"===autoNext)return!1;try{if(this.data_.meta.next.url)try{"ad-playback"!==this.ads.state&&null===this.error()&&this.autoNext()}catch(b){null===this.error()&&this.autoNext()}}catch(b){}}},vgplayer.Player.prototype.autoNext=function(){var a=0,b=this.data_.meta.next.url,c=vgplayer.createEl("div",{id:"next-video"}),d=vgplayer.createEl("div",{className:"next-video-close",innerHTML:"x"}),e=vgplayer.createEl("div",{className:"title",innerHTML:"<span>Xem tiếp: "+this.data_.meta.next.name+"</span>"}),f=vgplayer.createEl("img",{className:"next-video-thumbnail",src:this.data_.meta.next.img}),g=vgplayer.createEl("span",{className:"auto-next-button",innerHTML:'<svg viewBox="-10 -10 220 220"><g fill="none" stroke-width="3" transform="translate(100,100)"><path d="M 0,-100 A 100,100 0 0,1 86.6,-50" stroke="url(#cl1)"/><path d="M 86.6,-50 A 100,100 0 0,1 86.6,50" stroke="url(#cl2)"/><path d="M 86.6,50 A 100,100 0 0,1 0,100" stroke="url(#cl3)"/><path d="M 0,100 A 100,100 0 0,1 -86.6,50" stroke="url(#cl4)"/><path d="M -86.6,50 A 100,100 0 0,1 -86.6,-50" stroke="url(#cl5)"/><path d="M -86.6,-50 A 100,100 0 0,1 0,-100" stroke="url(#cl6)"/></g></svg> <svg viewBox="-10 -10 220 220"><path d="M200,100 C200,44.771525 155.228475,0 100,0 C44.771525,0 0,44.771525 0,100 C0,155.228475 44.771525,200 100,200 C155.228475,200 200,155.228475 200,100 Z" stroke-dashoffset="629"></path></svg>'}),h=vgplayer.createEl("span",{className:"cancel",innerHTML:"không chuyển"}),i=vgplayer.createEl("div",{className:"next-progress"});i.appendChild(g),i.appendChild(h),c.appendChild(d),c.appendChild(e),c.appendChild(i),c.appendChild(f),this.el().appendChild(c),d.onclick=function(a){return a.stopPropagation(),window.clearInterval(interval),c.parentNode.removeChild(c),!1},h.onclick=function(a){return a.stopPropagation(),window.clearInterval(interval),c.parentNode.removeChild(c),!1},c.onclick=function(){window.location.href=b},this.cache_.interval=interval=window.setInterval(function(){return a++,a>=10?(clearInterval(interval),window.location.href=b,!1):void 0},1e3)},vgplayer.Player.prototype.onDurationChange=function(){var a=this.techGet("duration");a&&(0>a&&(a=1/0),this.duration(a))},vgplayer.Player.prototype.onVolumeChange,vgplayer.Player.prototype.onFullscreenChange=function(){this.isFullscreen()?this.addClass("vgplayer-fullscreen"):this.removeClass("vgplayer-fullscreen")},vgplayer.Player.prototype.cache_,vgplayer.Player.prototype.getCache=function(){return this.cache_},vgplayer.Player.prototype.techCall=function(a,b){if(this.tech&&!this.tech.isReady_)this.tech.ready(function(){this[a](b)});else try{this.tech[a](b)}catch(c){throw vgplayer.log(c),c}},vgplayer.Player.prototype.techGet=function(a){if(this.tech&&this.tech.isReady_)try{return this.tech[a]()}catch(b){throw void 0===this.tech[a]?vgplayer.log("VGPlayer: "+a+" method not defined for "+this.techName+" playback technology.",b):"TypeError"==b.name?(vgplayer.log("VGPlayer: "+a+" unavailable on "+this.techName+" playback technology element.",b),this.tech.isReady_=!1):vgplayer.log(b),b}},vgplayer.Player.prototype.play=function(){return this.techCall("play"),this},vgplayer.Player.prototype.pause=function(){return this.techCall("pause"),this},vgplayer.Player.prototype.paused=function(){return this.techGet("paused")!==!1},vgplayer.Player.prototype.reload=function(){var a=this.player_.cache_.src,b=this.player_.cache_.currentTime,c=this.player_.cache_.duration;b>=c-1&&(b=0),this.player_.src(a).one("loadedmetadata",function(){this.player_.currentTime(b)});try{window.clearInterval(this.cache_.interval);var d=document.getElementById("next-video");this.el().removeChild(d)}catch(e){}return this},vgplayer.Player.prototype.download=function(){var a,b=document.createElement("a");if(a=this.player_.options_.download?this.player_.options_.download:this.player_.cache_.src,b.href=a,document.createEvent){var c=document.createEvent("MouseEvents");c.initEvent("click",!0,!0),b.dispatchEvent(c)}else alert("Trình duyệt không hỗ trợ");return!0},vgplayer.Player.prototype.next=function(){try{this.data_.meta.next.url&&(window.location.href=this.data_.meta.next.url)}catch(a){vgplayer.log.warn("Không có đường dẫn để chuyển tiếp.")}return!1},vgplayer.Player.prototype.currentTime=function(a){if(void 0!==a)return this.techCall("setCurrentTime",a),this.manualTimeUpdates&&this.trigger("timeupdate"),this;try{"true"===localStorage.getItem("saveTime")&&(this.techGet("currentTime")<60||this.techGet("currentTime")>this.duration()-60||vgplayer.setLocalStorage(this.data_.meta.now.id+"_time",this.techGet("currentTime")))}catch(b){}return this.cache_.currentTime=this.techGet("currentTime")||0},vgplayer.Player.prototype.duration=function(a){return void 0!==a?(this.cache_.duration=parseFloat(a),this):(void 0===this.cache_.duration&&this.onDurationChange(),this.cache_.duration||0)},vgplayer.Player.prototype.remainingTime=function(){return this.duration()-this.currentTime()},vgplayer.Player.prototype.buffered=function(){var a=this.techGet("buffered");return a&&a.length||(a=vgplayer.createTimeRange(0,0)),a},vgplayer.Player.prototype.bufferedPercent=function(){var a,b,c=this.duration(),d=this.buffered(),e=0;if(!c)return 0;for(var f=0;f<d.length;f++)a=d.start(f),b=d.end(f),b>c&&(b=c),e+=b-a;return e/c},vgplayer.Player.prototype.bufferedEnd=function(){var a=this.buffered(),b=this.duration(),c=a.end(a.length-1);return c>b&&(c=b),c},vgplayer.Player.prototype.volume=function(a,b){var c;if(void 0!==a){c=Math.max(0,Math.min(1,parseFloat(a))),this.cache_.volume=c,this.techCall("setVolume",c);try{b&&store.set("volume",c)}catch(d){}return this}return c=parseFloat(this.techGet("volume")),latestVol=store.get("volume"),isNaN(c)?latestVol:c},vgplayer.Player.prototype.muted=function(a){return void 0!==a?(this.techCall("setMuted",a),this):this.techGet("muted")||!1},vgplayer.Player.prototype.supportsFullScreen=function(){return this.techGet("supportsFullScreen")||!1},vgplayer.Player.prototype.isFullscreen_=!1,vgplayer.Player.prototype.isFullscreen=function(a){return void 0!==a?(this.isFullscreen_=!!a,this):this.isFullscreen_},vgplayer.Player.prototype.isFullScreen=function(a){return vgplayer.log.warn('player.isFullScreen() has been deprecated, use player.isFullscreen() with a lowercase "s")'),this.isFullscreen(a)},vgplayer.Player.prototype.requestFullscreen=function(){var a=vgplayer.browser.fullscreenAPI;return this.isFullscreen(!0),a?(vgplayer.on(document,a.fullscreenchange,vgplayer.bind(this,function(b){this.isFullscreen(document[a.fullscreenElement]),this.isFullscreen()===!1&&vgplayer.off(document,a.fullscreenchange,arguments.callee),this.trigger("fullscreenchange")})),this.el_[a.requestFullscreen]()):this.tech.supportsFullScreen()?this.techCall("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange")),this},vgplayer.Player.prototype.requestFullScreen=function(){return vgplayer.log.warn('player.requestFullScreen() has been deprecated, use player.requestFullscreen() with a lowercase "s")'),this.requestFullscreen()},vgplayer.Player.prototype.exitFullscreen=function(){var a=vgplayer.browser.fullscreenAPI;return this.isFullscreen(!1),a?document[a.exitFullscreen]():this.tech.supportsFullScreen()?this.techCall("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange")),this},vgplayer.Player.prototype.cancelFullScreen=function(){return vgplayer.log.warn("player.cancelFullScreen() has been deprecated, use player.exitFullscreen()"),this.exitFullscreen()},vgplayer.Player.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,vgplayer.on(document,"keydown",vgplayer.bind(this,this.fullWindowOnEscKey)),document.documentElement.style.overflow="hidden",vgplayer.addClass(document.body,"vgplayer-full-window"),this.trigger("enterFullWindow")},vgplayer.Player.prototype.fullWindowOnEscKey=function(a){27===a.keyCode&&(this.isFullscreen()===!0?this.exitFullscreen():this.exitFullWindow())},vgplayer.Player.prototype.exitFullWindow=function(){this.isFullWindow=!1,vgplayer.off(document,"keydown",this.fullWindowOnEscKey),document.documentElement.style.overflow=this.docOrigOverflow,vgplayer.removeClass(document.body,"vgplayer-full-window"),this.trigger("exitFullWindow")},vgplayer.Player.prototype.selectSource=function(a){var b="Html5",c=window.vgplayer[b];c||vgplayer.log.error('The "'+b+'" tech is undefined. Skipped browser support check for that tech.');for(var d=0,e=a;d<e.length;d++){var f=e[d];if(c.canPlaySource(f))return{source:f,tech:b}}return!1},vgplayer.Player.prototype.src=function(a){return void 0===a?this.techGet("src"):(vgplayer.obj.isArray(a)?this.sourceList_(a):"string"==typeof a?this.src({src:a}):a instanceof Object&&(a.type&&!window.vgplayer[this.techName].canPlaySource(a)?this.sourceList_([a]):(this.cache_.src=a.src,this.currentType_=a.type||"",this.ready(function(){this.techCall("src",a.src),"auto"==this.options_.preload&&this.load(),this.options_.autoplay&&this.play()}))),this)},vgplayer.Player.prototype.sourceList_=function(a){var b=this.selectSource(a);if(b)b.tech===this.techName?this.src(b.source):this.loadTech(b.tech,b.source);else{this.error({code:4,message:this.options().notSupportedMessage}),this.triggerReady();var c=vgplayer.Component.prototype.createEl.call(this,"div",{className:"vgplayer-error-display"});this.contentEl_=vgplayer.createEl("div"),this.contentEl_.innerHTML="Không thể chạy được video này!",c.appendChild(this.contentEl_),this.el().appendChild(c)}},vgplayer.Player.prototype.load=function(){return this.techCall("load"),this},vgplayer.Player.prototype.currentSrc=function(){return this.techGet("currentSrc")||this.cache_.src||""},vgplayer.Player.prototype.currentType=function(){return this.currentType_||""},vgplayer.Player.prototype.preload=function(a){return void 0!==a?(this.techCall("setPreload",a),this.options_.preload=a,this):this.techGet("preload")},vgplayer.Player.prototype.autoplay=function(a){return void 0!==a?(this.techCall("setAutoplay",a),this.options_.autoplay=a,this):this.techGet("autoplay",a)},vgplayer.Player.prototype.loop=function(a){return void 0!==a?(this.techCall("setLoop",a),this.options_.loop=a,this):this.techGet("loop")},vgplayer.Player.prototype.data_,vgplayer.Player.prototype.data=function(a){return void 0!==a?(this.data_=a,this):this.data_},vgplayer.Player.prototype.poster_,vgplayer.Player.prototype.poster=function(a){return void 0===a?this.poster_:(this.poster_=a,this.techCall("setPoster",a),void this.trigger("posterchange"))},vgplayer.Player.prototype.controls_,vgplayer.Player.prototype.controls=function(a){return void 0!==a?(a=!!a,this.controls_!==a&&(this.controls_=a,a?(this.removeClass("vgplayer-controls-disabled"),this.addClass("vgplayer-controls-enabled"),this.trigger("controlsenabled")):(this.removeClass("vgplayer-controls-enabled"),this.addClass("vgplayer-controls-disabled"),this.trigger("controlsdisabled"))),this):this.controls_},vgplayer.Player.prototype.usingNativeControls_=null,vgplayer.Player.prototype.usingNativeControls=function(a){return void 0!==a?(a=!!a,this.usingNativeControls_!==a&&(this.usingNativeControls_=a,a?(this.addClass("vgplayer-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vgplayer-using-native-controls"),this.trigger("usingcustomcontrols"))),this):this.usingNativeControls_},vgplayer.Player.prototype.error_=null,vgplayer.Player.prototype.error=function(a){return void 0===a?this.error_:null===a?(this.error_=a,this.removeClass("vgplayer-error"),this):(a instanceof vgplayer.MediaError?this.error_=a:this.error_=new vgplayer.MediaError(a),this.trigger("error"),this.addClass("vgplayer-error"),this.addClass("vgplayer-paused"),this.removeClass("vgplayer-playing"),vgplayer.log.error("(CODE:"+this.error_.code+" "+vgplayer.MediaError.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this)},vgplayer.Player.prototype.ended=function(){return this.techGet("ended")},vgplayer.Player.prototype.seeking=function(){return this.techGet("seeking")},vgplayer.Player.prototype.userActivity_=!0,vgplayer.Player.prototype.reportUserActivity=function(a){this.userActivity_=!0},vgplayer.Player.prototype.userActive_=!0,vgplayer.Player.prototype.userActive=function(a){if(void 0!==a){if(a=!!a,a!==this.userActive_)if(this.userActive_=a,a)this.userActivity_=!0,this.removeClass("vgplayer-user-inactive"),this.addClass("vgplayer-user-active"),this.trigger("useractive");else{if(this.userActivity_=!1,this.tech&&this.tech.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),!this.paused()&&null!==vgplayer.el("vgplayer-setting")&&vgplayer.el("vgplayer-setting").classList.length<3)return!1;this.removeClass("vgplayer-user-active"),this.addClass("vgplayer-user-inactive"),this.trigger("userinactive")}return this}return this.userActive_},vgplayer.Player.prototype.listenForUserActivity=function(){var a,b,c,d,e,f,g,h,i;a=vgplayer.bind(this,this.reportUserActivity),b=function(b){b.screenX==h&&b.screenY==i||(h=b.screenX,i=b.screenY,a())},c=function(b){a(),clearInterval(d),d=setInterval(a,250);try{3===event.which&&vgplayer.buildContextMenu(this.player_)}catch(c){2===b.button&&vgplayer.buildContextMenu(this.player_)}},e=function(b){a(),clearInterval(d)},this.on("mousedown",c),this.on("mousemove",b),this.on("mouseup",e),this.on("keydown",a),this.on("keyup",a),f=setInterval(vgplayer.bind(this,function(){this.userActivity_&&(this.userActivity_=!1,this.userActive(!0),clearTimeout(g),g=setTimeout(vgplayer.bind(this,function(){this.userActivity_||this.userActive(!1)}),2e3))}),250),this.on("dispose",function(){clearInterval(f),clearTimeout(g)})},vgplayer.Player.prototype.playbackRate=function(a){return void 0!==a?(this.techCall("setPlaybackRate",a),this):this.tech&&this.tech.features&&this.tech.features.playbackRate?this.techGet("playbackRate"):1},vgplayer.ControlBar=vgplayer.Component.extend({init:function(a,b,c){b=b||{},a.el().hasAttribute("tabIndex")||a.el().setAttribute("tabIndex","-1"),vgplayer.Component.call(this,a,b,c),a.on("keydown",vgplayer.bind(this,this.hotKey))}}),vgplayer.ControlBar.prototype.options_={loadEvent:"play",children:{playToggle:{},nextButton:{},muteToggle:{},volumeControl:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},remainingTimeDisplay:{},progressControl:{},fullscreenToggle:{},reloadButton:{},settingButton:{},downloadButton:{},turnOffLightButton:{}}},vgplayer.ControlBar.prototype.createEl=function(){return vgplayer.createEl("div",{className:"vgplayer-control-bar"})},vgplayer.ControlBar.prototype.hotKey=function(a){a.preventDefault();var b=this.player_,c=b.currentTime(),d=a.which;switch(d){case 32:case 75:b.paused()?b.play():b.pause();break;case 37:c-=a.ctrlKey?60:10,(b.currentTime()<=10||0>c)&&(c=0),b.currentTime(c);break;case 39:c+=a.ctrlKey?60:10,c>=b.duration()&&(c=b.duration()),b.currentTime(c);break;case 40:b.volume(b.volume()-.1);break;case 38:b.volume(b.volume()+.1);break;case 77:b.muted()?b.muted(!1):b.muted(!0);break;case 70:case 13:b.isFullscreen()?b.exitFullscreen():b.requestFullscreen();break;default:if(d>47&&59>d||d>95&&106>d){var e=48;d>95&&(e=96);var f=d-e;a.preventDefault(),b.currentTime(b.duration()*f*.1)}}},vgplayer.PlayToggle=vgplayer.Button.extend({init:function(a,b){vgplayer.Button.call(this,a,b),a.on("play",vgplayer.bind(this,this.onPlay)),a.on("pause",vgplayer.bind(this,this.onPause))}}),vgplayer.PlayToggle.prototype.buttonText="Phát",vgplayer.PlayToggle.prototype.buildCSSClass=function(){return"vgplayer-play-control "+vgplayer.Button.prototype.buildCSSClass.call(this)},vgplayer.PlayToggle.prototype.onClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},vgplayer.PlayToggle.prototype.onPlay=function(){vgplayer.removeClass(this.el_,"vgplayer-paused"),vgplayer.addClass(this.el_,"vgplayer-playing"),this.el_.children[0].children[0].innerHTML="Dừng"},vgplayer.PlayToggle.prototype.onPause=function(){vgplayer.removeClass(this.el_,"vgplayer-playing"),vgplayer.addClass(this.el_,"vgplayer-paused"),this.el_.children[0].children[0].innerHTML="Phát"},vgplayer.NextButton=vgplayer.Button.extend({init:function(a,b){try{a.options_.next.id&&vgplayer.Button.call(this,a,b)}catch(c){}}}),vgplayer.NextButton.prototype.buttonText="Tập tiếp theo",vgplayer.NextButton.prototype.buildCSSClass=function(){return"vgplayer-next-control "+vgplayer.Button.prototype.buildCSSClass.call(this)},vgplayer.NextButton.prototype.onClick=function(){try{this.player_.options_.vmPlayer.getSingleEpisode("id",this.player_.options_.next.id)}catch(a){}},vgplayer.NextButton.prototype.onMouseOver=function(){void 0===this.nextPreview_?(this.nextPreview_=new vgplayer.NextPreview(this.player_,this.options_),this.player_.addChild(this.nextPreview_)):this.nextPreview_.el_.classList.remove("hide")},vgplayer.NextButton.prototype.onMouseOut=function(){void 0!==this.nextPreview_&&this.nextPreview_.el_.classList.add("hide")},vgplayer.NextPreview=vgplayer.Component.extend({init:function(a,b){vgplayer.Component.call(this,a,b)}}),vgplayer.NextPreview.prototype.createEl=function(){return preview=vgplayer.createEl("div",{className:"vgplayer-next-preview",innerHTML:'<img src="'+this.player_.options_.next.thumbnail_small+'"><div class="preview-wrapper"><div class="preview-title">Tiếp theo</div><div class="preview-text">'+this.player_.options_.next.full_name+"</div></div>"})},vgplayer.NextPreview.prototype.dispose=function(){vgplayer.Component.prototype.dispose.call(this)},vgplayer.ReloadButton=vgplayer.Button.extend({init:function(a,b){vgplayer.Button.call(this,a,b)}}),vgplayer.ReloadButton.prototype.buttonText="Phát lại",vgplayer.ReloadButton.prototype.buildCSSClass=function(){return"vgplayer-reload-control "+vgplayer.Button.prototype.buildCSSClass.call(this)},vgplayer.ReloadButton.prototype.onClick=function(){this.player_.reload()},vgplayer.TurnOffLightButton=vgplayer.Button.extend({init:function(a,b){vgplayer.Button.call(this,a,b),vgplayer.on(window,"click",vgplayer.bind(this,this.windowClick))}}),vgplayer.TurnOffLightButton.prototype.buttonText="Tắt đèn",vgplayer.TurnOffLightButton.prototype.buildCSSClass=function(){return"vgplayer-turn-off-light-control "+vgplayer.Button.prototype.buildCSSClass.call(this)},vgplayer.TurnOffLightButton.prototype.onClick=function(a){var b=document.querySelector(".light-off");if(b)if(b.classList.contains("active")){b.classList.remove("active"),b.style.zIndex="";var c=this;setTimeout(function(){if(document.querySelector(".light-off")&&"light-off"==b.className){try{document.body.removeChild(b)}catch(a){}c.player_.el_.style.zIndex="",c.el_.children[0].children[0].innerHTML="Tắt đèn"}},500)}else b.classList.add("active"),this.player_.el_.style.zIndex=1068,this.el_.children[0].children[0].innerHTML="Bật đèn";else b=document.createElement("div"),b.className="light-off",document.body.appendChild(b),this.player_.el_.style.zIndex=1068,this.el_.children[0].children[0].innerHTML="Bật đèn",setTimeout(function(){b&&b.classList.add("active")},10)},vgplayer.TurnOffLightButton.prototype.windowClick=function(a){var b=document.querySelector(".light-off"),c=!1,d=a.target;if(b){for(;d!=document.body&&"vgplayer-next-control"!=d.classList[0];){if("videoPlayer"==d.id){c=!0;break}d=d.parentNode}c||b.classList.contains("active")&&(b.classList.remove("active"),b.style.zIndex="",setTimeout(function(){if(document.querySelector(".light-off")&&"light-off"==b.className){try{document.body.removeChild(b)}catch(a){}document.querySelector(".vg-video").style.zIndex="",document.querySelector(".vgplayer-turn-off-light-control").children[0].children[0].innerHTML="Tắt đèn"}},500))}},vgplayer.DownloadButton=vgplayer.Button.extend({init:function(a,b){vgplayer.Button.call(this,a,b)}}),vgplayer.DownloadButton.prototype.buttonText="Tải về máy",vgplayer.DownloadButton.prototype.buildCSSClass=function(){return"vgplayer-download-control "+vgplayer.Button.prototype.buildCSSClass.call(this)},vgplayer.DownloadButton.prototype.onClick=function(){this.player_.download()},vgplayer.SettingButton=vgplayer.Button.extend({init:function(a,b){vgplayer.Button.call(this,a,b)}}),vgplayer.SettingButton.prototype.buttonText="Cài đặt",vgplayer.SettingButton.prototype.buildCSSClass=function(){return parseInt(this.player_.options_.sources[0].quality)>480?"vgplayer-setting-control hd-quality-badge "+vgplayer.Button.prototype.buildCSSClass.call(this):"vgplayer-setting-control "+vgplayer.Button.prototype.buildCSSClass.call(this)},vgplayer.SettingButton.prototype.onClick=function(a){if(a.stopImmediatePropagation(),this.el_.classList.toggle("vgplayer-setting-control-active"),null!=vgplayer.el("dropdown-context"))try{vgplayer.el("dropdown-context").parentNode.removeChild(vgplayer.el("dropdown-context"))}catch(a){}void 0==this.settingOverlay_?(this.settingOverlay_=new vgplayer.SettingContainer(this.player_,this.options_),this.player_.addChild(this.settingOverlay_)):(this.player_.removeChild(this.settingOverlay_),this.settingOverlay_.dispose(),delete this.settingOverlay_),vgplayer.one(window,"click",vgplayer.bind(this,this.windowClick))},vgplayer.SettingButton.prototype.windowClick=function(a){try{this.player_.removeChild(this.settingOverlay_),this.settingOverlay_.dispose(),delete this.settingOverlay_,this.el_.classList.toggle("vgplayer-setting-control-active")}catch(a){}},vgplayer.SettingContainer=vgplayer.Component.extend({init:function(a,b){vgplayer.Component.call(this,a,b)}}),vgplayer.SettingContainer.prototype.createEl=function(a,b){var c,d,e=this.player_,f=e.options_.sources;f.sort(function(a,b){return parseInt(a.quality)>parseInt(b.quality)?-1:parseInt(a.quality)<parseInt(b.quality)?1:0});var g=vgplayer.createEl("div",{id:"vgplayer-setting",className:"vgp-panelpopup vgp-settings-menu"}),h=vgplayer.createEl("div",{className:"vgp-panel"}),i=vgplayer.createEl("div",{className:"vgp-panel-content"}),j=vgplayer.createEl("div",{id:"vgp-main-menu-id",className:"vgp-menu",role:"menu"}),k=[{name:"autonext",role:"menuitemcheckbox",checked:store.get("autonext"),label:"Tự chuyển tập"},{name:"resume",role:"menuitemcheckbox",checked:store.get("resume"),label:"Lưu thời gian"},{name:"playbackRate",role:"menuitem",label:"Tốc độ",content:e.playbackRate().toString(),hasPopup:!0,sup:"",subItems:[{name:"0.5",value:.5},{name:"1",value:1},{name:"1.5",value:1.5},{name:"2",value:2}]},{name:"server",role:"menuitem",label:"Chất lượng",content:e.cache_.quality,hasPopup:!0,sup:"",subItems:[]}];return headerCreateEl=function(a){var b;if(a)return b=vgplayer.createEl("div",{className:"vgp-panel-header",innerHTML:'<span class="vgp-button vgp-panel-title">'+a+"</span>"}),b.onclick=function(a){a.stopImmediatePropagation(),menuCreateEl()},b},menuCreateEl=function(a){for(;j.firstChild;)j.removeChild(j.firstChild);if(a){h.insertBefore(headerCreateEl(a.label),i);for(var b=0;b<a.subItems.length;b++)a.subItems[b].name==a.content?checked=!0:checked=!1,parseInt(a.subItems[b].name)>480?sup="<sup>HD</sup>":sup="",j.appendChild(menuItemCreateEl({name:a.name,role:"menuitemradio",checked:checked,sup:sup,label:a.subItems[b].name,value:a.subItems[b].value}));e.el_.classList.contains("vgplayer-fullscreen")?(c="130px",d=38*(j.children.length+1)+"px"):(c="88px",d=26*(j.children.length+1)+"px")}else{h.firstChild&&h.removeChild(h.firstChild);for(var b=0;b<k.length;b++)"menuitemcheckbox"==k[b].role?void 0!=store.get(k[b].name)&&(k[b].checked=store.get(k[b].name),j.appendChild(menuItemCreateEl(k[b]))):(parseInt(k[b].content)>480&&(k[b].sup="<sup>HD</sup>"),j.appendChild(menuItemCreateEl(k[b])));e.el_.classList.contains("vgplayer-fullscreen")?(c="292px",d=38*j.children.length+"px"):(c="167px",d=26*j.children.length+"px")}i.style.width=c,i.style.height=d,h.style.width=c,h.style.height=d,g.style.width=c,g.style.height=d},menuItemCreateEl=function(a){var b;return"menuitem"==a.role?b=vgplayer.createEl("div",{className:"vgp-menuitem",role:"menuitem","aria-haspopup":a.hasPopup,innerHTML:'<div class="vgp-menuitem-label">'+a.label+'</div><div class="vgp-menuitem-content">'+a.content+a.sup+"</div></div>"}):"menuitemcheckbox"==a.role?b=vgplayer.createEl("div",{className:"vgp-menuitem",role:"menuitemcheckbox","aria-checked":a.checked,innerHTML:'<div class="vgp-menuitem-label">'+a.label+'</div><div class="vgp-menuitem-content"><div class="vgp-menuitem-toggle-checkbox"></div></div>'}):"menuitemradio"==a.role&&(b=vgplayer.createEl("div",{className:"vgp-menuitem",role:"menuitemradio","aria-checked":a.checked,innerHTML:'<div class="vgp-menuitem-label">'+a.label+a.sup+"</div>"})),b.onclick=function(b){if(b.stopImmediatePropagation(),"menuitem"==a.role){({name:a.name+"List",role:"menuitemradio",label:1});if("server"==a.name){a.subItems=[];for(var c=0;c<f.length;c++)a.subItems.push({name:f[c].quality,value:f[c].src})}menuCreateEl(a)}else if("menuitemcheckbox"==a.role)"true"==this.getAttribute("aria-checked")?(this.setAttribute("aria-checked","false"),store.set(a.name,!1)):(this.setAttribute("aria-checked","true"),store.set(a.name,!0));else if("menuitemradio"==a.role){for(var d=document.getElementsByClassName("vgp-menuitem"),c=0,g=d.length;g>c;c++)d[c].removeAttribute("aria-checked");if("server"==a.name)a.checked||(this.setAttribute("aria-checked","true"),currentTime=e.currentTime(),e.cache_.quality=a.label,e.src(a.value).one("loadedmetadata",function(){e.currentTime(currentTime);try{document.querySelector("#video-thumbnail").src=a.value}catch(b){}e.paused()||e.play()})),parseInt(a.label)>480?e.controlBar.settingButton.el_.classList.add("hd-quality-badge"):e.controlBar.settingButton.el_.classList.remove("hd-quality-badge"),e.removeChild(e.controlBar.settingButton.settingOverlay_),e.controlBar.settingButton.settingOverlay_.dispose(),delete e.controlBar.settingButton.settingOverlay_;else if("playbackRate"==a.name){a.checked||(this.setAttribute("aria-checked","true"),
e.playbackRate(a.value));for(var c=0;c<k.length;c++)if(k[c].name==a.name){k[c].content=a.label;break}menuCreateEl()}}},b},menuCreateEl(),i.appendChild(j),h.appendChild(i),g.appendChild(h),g},vgplayer.SettingContainer.prototype.dispose=function(){vgplayer.Component.prototype.dispose.call(this)},vgplayer.CurrentTimeDisplay=vgplayer.Component.extend({init:function(a,b){vgplayer.Component.call(this,a,b),a.on("timeupdate",vgplayer.bind(this,this.updateContent))}}),vgplayer.CurrentTimeDisplay.prototype.createEl=function(){var a=vgplayer.Component.prototype.createEl.call(this,"div",{className:"vgplayer-current-time vgplayer-time-controls vgplayer-control"});return this.contentEl_=vgplayer.createEl("div",{className:"vgplayer-current-time-display",innerHTML:'<span class="vgplayer-control-text">Current Time </span>0:00'}),a.appendChild(this.contentEl_),a},vgplayer.CurrentTimeDisplay.prototype.updateContent=function(){var a=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.contentEl_.innerHTML='<span class="vgplayer-control-text">Current Time</span> '+vgplayer.formatTime(a,this.player_.duration())},vgplayer.DurationDisplay=vgplayer.Component.extend({init:function(a,b){vgplayer.Component.call(this,a,b),a.on("timeupdate",vgplayer.bind(this,this.updateContent))}}),vgplayer.DurationDisplay.prototype.createEl=function(){var a=vgplayer.Component.prototype.createEl.call(this,"div",{className:"vgplayer-duration vgplayer-time-controls vgplayer-control"});return this.contentEl_=vgplayer.createEl("div",{className:"vgplayer-duration-display",innerHTML:'<span class="vgplayer-control-text">Duration Time</span> 0:00'}),a.appendChild(this.contentEl_),a},vgplayer.DurationDisplay.prototype.updateContent=function(){var a=this.player_.duration();a&&(this.contentEl_.innerHTML='<span class="vgplayer-control-text">Duration Time</span> '+vgplayer.formatTime(a))},vgplayer.TimeDivider=vgplayer.Component.extend({init:function(a,b){vgplayer.Component.call(this,a,b)}}),vgplayer.TimeDivider.prototype.createEl=function(){return vgplayer.Component.prototype.createEl.call(this,"div",{className:"vgplayer-time-divider",innerHTML:"<div><span>/</span></div>"})},vgplayer.RemainingTimeDisplay=vgplayer.Component.extend({init:function(a,b){vgplayer.Component.call(this,a,b),a.on("timeupdate",vgplayer.bind(this,this.updateContent))}}),vgplayer.RemainingTimeDisplay.prototype.createEl=function(){var a=vgplayer.Component.prototype.createEl.call(this,"div",{className:"vgplayer-remaining-time vgplayer-time-controls vgplayer-control"});return this.contentEl_=vgplayer.createEl("div",{className:"vgplayer-remaining-time-display",innerHTML:'<span class="vgplayer-control-text">Remaining Time</span> -0:00'}),a.appendChild(this.contentEl_),a},vgplayer.RemainingTimeDisplay.prototype.updateContent=function(){this.player_.duration()&&(this.contentEl_.innerHTML='<span class="vgplayer-control-text">Remaining Time</span> -'+vgplayer.formatTime(this.player_.remainingTime()))},vgplayer.FullscreenToggle=vgplayer.Button.extend({init:function(a,b){vgplayer.Button.call(this,a,b)}}),vgplayer.FullscreenToggle.prototype.buttonText="Toàn màn hình",vgplayer.FullscreenToggle.prototype.buildCSSClass=function(){return"vgplayer-fullscreen-control "+vgplayer.Button.prototype.buildCSSClass.call(this)},vgplayer.FullscreenToggle.prototype.onClick=function(){this.player_.isFullscreen()?(this.player_.exitFullscreen(),this.controlText_.innerHTML="Toàn màn hình"):(this.player_.requestFullscreen(),this.controlText_.innerHTML="Thu nhỏ")},vgplayer.ProgressControl=vgplayer.Component.extend({init:function(a,b){vgplayer.Component.call(this,a,b),a.on("mousemove",vgplayer.bind(this,this.onMouseMove))}}),vgplayer.ProgressControl.prototype.options_={children:{seekBar:{}}},vgplayer.ProgressControl.prototype.createEl=function(){var a=vgplayer.createEl("div",{className:"vgplayer-progress-tip"}),b=vgplayer.Component.prototype.createEl.call(this,"div",{className:"vgplayer-progress-control vgplayer-control"});return b.appendChild(a),b},vgplayer.ProgressControl.prototype.onMouseMove=function(){var a=this.player_,b=document.querySelector("#video-thumbnail"),c=document.querySelector("#canvas-thumbnail");this.el_.onmousemove=function(d){var e,f,g,h,i,j,k,l;k=a.controlBar.progressControl.seekBar;var m=(d.pageX-k.el_.getBoundingClientRect().left)/k.width();l=m*a.duration(),l===a.duration()&&(l-=.1),i=Math.floor(l/60),j=Math.floor(l-60*i),10>j&&(j="0"+j),0>i&&(i="00",j="00"),this.firstChild.textContent=i+":"+j,f=a.controlBar.progressControl.el_.clientWidth-this.firstChild.clientWidth,e=d.pageX-a.el_.getBoundingClientRect().left-this.firstChild.clientWidth,a.el_.classList.contains("vgplayer-fullscreen")?(g=e-98,h=f-178):(e+=10,g=e-37,h=f-75),0>e?e=0:e>f&&(e=f),this.firstChild.style.left=e+"px",this.firstChild.style.visibility="visible";try{0>g?g=0:g>h&&(g=h),b.currentTime!=l&&(b.currentTime=l),c.style.left=g+"px",c.style.visibility="visible"}catch(n){console.log(n)}},this.el_.onmouseout=function(a){this.firstChild.style.left="0",this.firstChild.style.visibility="hidden";try{c.style.visibility="hidden"}catch(b){}}},vgplayer.SeekBar=vgplayer.Slider.extend({init:function(a,b){vgplayer.Slider.call(this,a,b),a.on("timeupdate",vgplayer.bind(this,this.updateARIAAttributes)),a.ready(vgplayer.bind(this,this.updateARIAAttributes))}}),vgplayer.SeekBar.prototype.options_={children:{loadProgressBar:{},playProgressBar:{},seekHandle:{}},barName:"playProgressBar",handleName:"seekHandle"},vgplayer.SeekBar.prototype.playerEvent="timeupdate",vgplayer.SeekBar.prototype.createEl=function(){return vgplayer.Slider.prototype.createEl.call(this,"div",{className:"vgplayer-progress-holder","aria-label":"video progress bar"})},vgplayer.SeekBar.prototype.updateARIAAttributes=function(){var a=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("aria-valuenow",vgplayer.round(100*this.getPercent(),2)),this.el_.setAttribute("aria-valuetext",vgplayer.formatTime(a,this.player_.duration()))},vgplayer.SeekBar.prototype.getPercent=function(){return this.player_.currentTime()/this.player_.duration()},vgplayer.SeekBar.prototype.onMouseDown=function(a){vgplayer.Slider.prototype.onMouseDown.call(this,a),this.player_.scrubbing=!0,this.videoWasPlaying=!this.player_.paused(),this.player_.pause()},vgplayer.SeekBar.prototype.onMouseMove=function(a){var b=this.calculateDistance(a)*this.player_.duration();b==this.player_.duration()&&(b-=.1),this.player_.currentTime(b)},vgplayer.SeekBar.prototype.onMouseUp=function(a){vgplayer.Slider.prototype.onMouseUp.call(this,a),this.player_.scrubbing=!1,this.videoWasPlaying&&this.player_.play()},vgplayer.SeekBar.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},vgplayer.SeekBar.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},vgplayer.LoadProgressBar=vgplayer.Component.extend({init:function(a,b){vgplayer.Component.call(this,a,b),a.on("progress",vgplayer.bind(this,this.update))}}),vgplayer.LoadProgressBar.prototype.createEl=function(){return vgplayer.Component.prototype.createEl.call(this,"div",{className:"vgplayer-load-progress",innerHTML:'<span class="vgplayer-control-text"><span>Loaded</span>: 0%</span>'})},vgplayer.LoadProgressBar.prototype.update=function(){var a,b,c,d,e=this.player_.buffered(),f=this.player_.duration(),g=this.player_.bufferedEnd(),h=this.el_.children,i=function(a,b){var c=a/b||0;return 100*c+"%"};for(this.el_.style.width=i(g,f),a=0;a<e.length;a++)b=e.start(a),c=e.end(a),d=h[a],d||(d=this.el_.appendChild(vgplayer.createEl())),d.style.left=i(b,g),d.style.width=i(c-b,g);for(a=h.length;a>e.length;a--)this.el_.removeChild(h[a-1])},vgplayer.PlayProgressBar=vgplayer.Component.extend({init:function(a,b){vgplayer.Component.call(this,a,b)}}),vgplayer.PlayProgressBar.prototype.createEl=function(){return vgplayer.Component.prototype.createEl.call(this,"div",{className:"vgplayer-play-progress",innerHTML:'<span class="vgplayer-control-text"><span>Progress</span>: 0%</span>'})},vgplayer.SeekHandle=vgplayer.SliderHandle.extend({init:function(a,b){vgplayer.SliderHandle.call(this,a,b),a.on("timeupdate",vgplayer.bind(this,this.updateContent))}}),vgplayer.SeekHandle.prototype.defaultValue="00:00",vgplayer.SeekHandle.prototype.createEl=function(){return vgplayer.SliderHandle.prototype.createEl.call(this,"div",{className:"vgplayer-seek-handle"})},vgplayer.SeekHandle.prototype.updateContent=function(){var a=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.innerHTML='<span class="vgplayer-control-text">'+vgplayer.formatTime(a,this.player_.duration())+"</span>"},vgplayer.VolumeControl=vgplayer.Component.extend({init:function(a,b){vgplayer.Component.call(this,a,b),a.tech&&a.tech.features&&a.tech.features.volumeControl===!1&&this.addClass("vgplayer-hidden"),a.on("loadstart",vgplayer.bind(this,function(){a.tech.features&&a.tech.features.volumeControl===!1?this.addClass("vgplayer-hidden"):this.removeClass("vgplayer-hidden")}))}}),vgplayer.VolumeControl.prototype.options_={children:{volumeBar:{}}},vgplayer.VolumeControl.prototype.createEl=function(){return vgplayer.Component.prototype.createEl.call(this,"div",{className:"vgplayer-volume-control vgplayer-control"})},vgplayer.VolumeBar=vgplayer.Slider.extend({init:function(a,b){vgplayer.Slider.call(this,a,b),a.on("volumechange",vgplayer.bind(this,this.updateARIAAttributes)),a.ready(vgplayer.bind(this,this.updateARIAAttributes)),setTimeout(vgplayer.bind(this,this.update),0)}}),vgplayer.VolumeBar.prototype.updateARIAAttributes=function(){latestVol=window.localStorage.getItem("volume"),latestVol?volume=latestVol:volume=this.player_.volume(),this.player_.volume(volume),this.el_.setAttribute("aria-valuenow",vgplayer.round(100*volume,2)),this.el_.setAttribute("aria-valuetext",vgplayer.round(100*volume,2)+"%")},vgplayer.VolumeBar.prototype.options_={children:{volumeLevel:{},volumeHandle:{}},barName:"volumeLevel",handleName:"volumeHandle"},vgplayer.VolumeBar.prototype.playerEvent="volumechange",vgplayer.VolumeBar.prototype.createEl=function(){return vgplayer.Slider.prototype.createEl.call(this,"div",{className:"vgplayer-volume-bar","aria-label":"volume level"})},vgplayer.VolumeBar.prototype.onMouseMove=function(a){a.stopImmediatePropagation(),this.player_.muted()&&this.player_.muted(!1),this.player_.volume(this.calculateDistance(a),!0)},vgplayer.VolumeBar.prototype.onMouseOver=function(a){},vgplayer.VolumeBar.prototype.onMouseOut=function(a){},vgplayer.VolumeBar.prototype.getPercent=function(){return this.player_.muted()?0:(latestVol=store.get("volume"),latestVol?volume=latestVol:volume=this.player_.volume(),volume)},vgplayer.VolumeBar.prototype.stepForward=function(){this.player_.volume(this.player_.volume()+.1)},vgplayer.VolumeBar.prototype.stepBack=function(){this.player_.volume(this.player_.volume()-.1)},vgplayer.VolumeLevel=vgplayer.Component.extend({init:function(a,b){vgplayer.Component.call(this,a,b)}}),vgplayer.VolumeLevel.prototype.createEl=function(){return vgplayer.Component.prototype.createEl.call(this,"div",{className:"vgplayer-volume-level",innerHTML:'<span class="vgplayer-control-text"></span>'})},vgplayer.VolumeHandle=vgplayer.SliderHandle.extend(),vgplayer.VolumeHandle.prototype.defaultValue="00:00",vgplayer.VolumeHandle.prototype.createEl=function(){return vgplayer.SliderHandle.prototype.createEl.call(this,"div",{className:"vgplayer-volume-handle"})},vgplayer.MuteToggle=vgplayer.Button.extend({init:function(a,b){vgplayer.Button.call(this,a,b),a.on("volumechange",vgplayer.bind(this,this.update)),a.tech&&a.tech.features&&a.tech.features.volumeControl===!1&&this.addClass("vgplayer-hidden"),a.on("loadstart",vgplayer.bind(this,function(){a.tech.features&&a.tech.features.volumeControl===!1?this.addClass("vgplayer-hidden"):this.removeClass("vgplayer-hidden")}))}}),vgplayer.MuteToggle.prototype.createEl=function(){return vgplayer.Button.prototype.createEl.call(this,"div",{className:"vgplayer-mute-control vgplayer-control",innerHTML:'<div><span class="vgplayer-control-text">Tắt tiếng</span></div>'})},vgplayer.MuteToggle.prototype.options_={},vgplayer.MuteToggle.prototype.onClick=function(){this.player_.muted(!this.player_.muted())},vgplayer.MuteToggle.prototype.onMouseOver=function(){},vgplayer.MuteToggle.prototype.onMouseOut=function(){},vgplayer.MuteToggle.prototype.update=function(){var a=this.player_.volume(),b=3;0===a||this.player_.muted()?b=0:.33>a?b=1:.67>a&&(b=2),this.player_.muted()?"Unmute"!=this.el_.children[0].children[0].innerHTML&&(this.el_.children[0].children[0].innerHTML="Bật tiếng"):"Mute"!=this.el_.children[0].children[0].innerHTML&&(this.el_.children[0].children[0].innerHTML="Tắt tiếng");for(var c=0;4>c;c++)vgplayer.removeClass(this.el_,"vgplayer-vol-"+c);vgplayer.addClass(this.el_,"vgplayer-vol-"+b)},vgplayer.VolumeMenuButton=vgplayer.MenuButton.extend({init:function(a,b){vgplayer.MenuButton.call(this,a,b),a.on("volumechange",vgplayer.bind(this,this.update)),a.tech&&a.tech.features&&a.tech.features.volumeControl===!1&&this.addClass("vgplayer-hidden"),a.on("loadstart",vgplayer.bind(this,function(){a.tech.features&&a.tech.features.volumeControl===!1?this.addClass("vgplayer-hidden"):this.removeClass("vgplayer-hidden")})),this.addClass("vgplayer-menu-button")}}),vgplayer.VolumeMenuButton.prototype.createMenu=function(){var a=new vgplayer.Menu(this.player_,{contentElType:"div"}),b=new vgplayer.VolumeBar(this.player_,vgplayer.obj.merge({vertical:!0},this.options_.volumeBar));return a.addChild(b),a},vgplayer.VolumeMenuButton.prototype.onClick=function(){vgplayer.MuteToggle.prototype.onClick.call(this),vgplayer.MenuButton.prototype.onClick.call(this)},vgplayer.VolumeMenuButton.prototype.createEl=function(){return vgplayer.Button.prototype.createEl.call(this,"div",{className:"vgplayer-volume-menu-button vgplayer-menu-button vgplayer-control",innerHTML:'<div><span class="vgplayer-control-text">Mute</span></div>'})},vgplayer.VolumeMenuButton.prototype.update=vgplayer.MuteToggle.prototype.update,vgplayer.PosterImage=vgplayer.Button.extend({init:function(a,b){vgplayer.Button.call(this,a,b),a.poster()&&this.src(a.poster()),a.poster()&&a.controls()||this.hide(),a.on("posterchange",vgplayer.bind(this,function(){this.src(a.poster())})),a.on("play",vgplayer.bind(this,this.hide))}});var _backgroundSizeSupported="backgroundSize"in vgplayer.TEST_VID.style;if(vgplayer.PosterImage.prototype.createEl=function(){var a=vgplayer.createEl("div",{className:"vgplayer-poster",tabIndex:-1});return _backgroundSizeSupported||a.appendChild(vgplayer.createEl("img")),a},vgplayer.PosterImage.prototype.src=function(a){var b=this.el();void 0!==a&&(_backgroundSizeSupported?b.style.backgroundImage='url("'+a+'")':b.firstChild.src=a)},vgplayer.PosterImage.prototype.onClick=function(){this.player().controls()&&this.player_.play()},vgplayer.LoadingSpinner=vgplayer.Component.extend({init:function(a,b){vgplayer.Component.call(this,a,b)}}),vgplayer.LoadingSpinner.prototype.createEl=function(){return vgplayer.Component.prototype.createEl.call(this,"div",{className:"vgplayer-loading-spinner"})},vgplayer.BigPlayButton=vgplayer.Button.extend({}),vgplayer.BigPlayButton.prototype.createEl=function(){return vgplayer.Button.prototype.createEl.call(this,"div",{className:"vgplayer-big-play-button",innerHTML:'<span aria-hidden="true"></span>',"aria-label":"play video"})},vgplayer.BigPlayButton.prototype.onClick=function(){this.player_.play()},vgplayer.GradientBackground=vgplayer.Button.extend({}),vgplayer.GradientBackground.prototype.createEl=function(){var a=vgplayer.createEl("div",{className:"vgplayer-gradient-top"}),b=vgplayer.createEl("div",{className:"vgplayer-gradient-bottom"}),c=vgplayer.createEl("div",{className:"vgplayer-gradient-background"});return c.appendChild(a),c.appendChild(b),c},vgplayer.ErrorDisplay=vgplayer.Component.extend({init:function(a,b){vgplayer.Component.call(this,a,b),this.update(),a.on("error",vgplayer.bind(this,this.update))}}),vgplayer.ErrorDisplay.prototype.createEl=function(){var a=vgplayer.Component.prototype.createEl.call(this,"div",{className:"vgplayer-error-display"});return this.contentEl_=vgplayer.createEl("div"),a.appendChild(this.contentEl_),a},vgplayer.ErrorDisplay.prototype.update=function(){this.player().error()&&(this.contentEl_.innerHTML=this.player().error().message)},vgplayer.MediaTechController=vgplayer.Component.extend({init:function(a,b,c){b=b||{},b.reportTouchActivity=!1,vgplayer.Component.call(this,a,b,c),this.initControlsListeners()}}),vgplayer.MediaTechController.prototype.initControlsListeners=function(){var a,b,c,d;b=this,a=this.player();var c=function(){a.controls()&&!a.usingNativeControls()&&b.addControlsListeners()};d=vgplayer.bind(b,b.removeControlsListeners),this.ready(c),a.on("controlsenabled",c),a.on("controlsdisabled",d),this.ready(function(){this.networkState&&this.networkState()>0&&this.player().trigger("loadstart")})},vgplayer.MediaTechController.prototype.addControlsListeners=function(){var a;this.on("mousedown",this.onClick),this.on("touchstart",function(b){a=this.player_.userActive()}),this.on("touchmove",function(b){a&&this.player().reportUserActivity()}),this.on("touchend",function(a){a.preventDefault()}),this.emitTapEvents(),this.on("tap",this.onTap)},vgplayer.MediaTechController.prototype.removeControlsListeners=function(){this.off("tap"),this.off("touchstart"),this.off("touchmove"),this.off("touchleave"),this.off("touchcancel"),this.off("touchend"),this.off("click"),this.off("mousedown")},vgplayer.MediaTechController.prototype.onClick=function(a){0===a.button&&this.player().controls()&&(this.player().paused()?this.player().play():this.player().pause())},vgplayer.MediaTechController.prototype.onTap=function(){this.player().userActive(!this.player().userActive())},vgplayer.MediaTechController.prototype.setPoster=function(){},vgplayer.MediaTechController.prototype.features={volumeControl:!0,fullscreenResize:!1,playbackRate:!1,progressEvents:!1,timeupdateEvents:!1},vgplayer.media={},vgplayer.Html5=vgplayer.MediaTechController.extend({init:function(a,b,c){this.features.volumeControl=vgplayer.Html5.canControlVolume(),this.features.playbackRate=vgplayer.Html5.canControlPlaybackRate(),this.features.movingMediaElementInDOM=!vgplayer.IS_IOS,this.features.fullscreenResize=!0,vgplayer.MediaTechController.call(this,a,b,c),this.setupTriggers();var d=b.source;d&&this.el_.currentSrc!==d.src&&(this.el_.src=d.src),vgplayer.TOUCH_ENABLED&&a.options().nativeControlsForTouch!==!1&&this.useNativeControls(),a.ready(function(){if(this.tag&&this.options_.autoplay&&this.paused()){delete this.tag.poster;var a;try{a=!!this.options_.plugins.happy}catch(b){a=!1}if(a);else{var c=vgplayer.parseUrl(window.location);if(c.search.length>1)try{var d=JSON.parse('{"'+decodeURI(c.search.substring(1).replace(/&/g,'","').replace(/=/g,'":"'))+'"}');if(d.t){var e=parseInt(d.t);0>e||this.currentTime(e)}else try{if("true"===localStorage.getItem("saveTime")){var f=localStorage.getItem(this.data_.meta.now.id+"_time");f>0&&this.currentTime(f)}}catch(b){}}catch(b){}else try{if("true"===localStorage.getItem("saveTime")){var f=localStorage.getItem(this.data_.meta.now.id+"_time");f>0&&this.currentTime(f)}}catch(b){}}this.play()}}),this.triggerReady()}}),vgplayer.Html5.prototype.dispose=function(){vgplayer.Html5.disposeMediaElement(this.el_),vgplayer.MediaTechController.prototype.dispose.call(this)},vgplayer.Html5.prototype.createEl=function(){var a,b=this.player_,c=b.tag;c&&this.features.movingMediaElementInDOM!==!1||(c?(a=c.cloneNode(!1),vgplayer.Html5.disposeMediaElement(c),c=a,b.tag=null):(c=vgplayer.createEl("video"),vgplayer.setElementAttributes(c,vgplayer.obj.merge(b.tagAttributes||{},{id:b.id()+"_html5_api","class":"vgplayer-tech"}))),c.player=b,vgplayer.insertFirst(c,b.el()));for(var d=["autoplay","preload","loop","muted"],e=d.length-1;e>=0;e--){var f=d[e],g={};"undefined"!=typeof b.options_[f]&&(g[f]=b.options_[f]),vgplayer.setElementAttributes(c,g)}return c},vgplayer.Html5.prototype.setupTriggers=function(){for(var a=vgplayer.Html5.Events.length-1;a>=0;a--)vgplayer.on(this.el_,vgplayer.Html5.Events[a],vgplayer.bind(this,this.eventHandler))},vgplayer.Html5.prototype.eventHandler=function(a){"error"==a.type?this.player().error(this.error().code):(a.bubbles=!1,this.player().trigger(a))},vgplayer.Html5.prototype.useNativeControls=function(){var a,b,c,d,e;a=this,b=this.player(),a.setControls(b.controls()),c=function(){a.setControls(!0)},d=function(){a.setControls(!1)},b.on("controlsenabled",c),b.on("controlsdisabled",d),e=function(){b.off("controlsenabled",c),b.off("controlsdisabled",d)},a.on("dispose",e),b.on("usingcustomcontrols",e),b.usingNativeControls(!0)},vgplayer.Html5.prototype.play=function(){this.el_.play()},vgplayer.Html5.prototype.pause=function(){this.el_.pause()},vgplayer.Html5.prototype.paused=function(){return this.el_.paused},vgplayer.Html5.prototype.reload=function(){this.el_.reload()},vgplayer.Html5.prototype.currentTime=function(){return this.el_.currentTime},vgplayer.Html5.prototype.setCurrentTime=function(a){try{this.el_.currentTime=a}catch(b){vgplayer.log(b,"Video is not ready.")}},vgplayer.Html5.prototype.duration=function(){return this.el_.duration||0},vgplayer.Html5.prototype.buffered=function(){return this.el_.buffered},vgplayer.Html5.prototype.volume=function(){return this.el_.volume},vgplayer.Html5.prototype.setVolume=function(a){this.el_.volume=a},vgplayer.Html5.prototype.muted=function(){return this.el_.muted},vgplayer.Html5.prototype.setMuted=function(a){this.el_.muted=a},vgplayer.Html5.prototype.width=function(){return this.el_.offsetWidth},vgplayer.Html5.prototype.height=function(){return this.el_.offsetHeight},vgplayer.Html5.prototype.supportsFullScreen=function(){return"function"==typeof this.el_.webkitEnterFullScreen&&(/Android/.test(vgplayer.USER_AGENT)||!/Chrome|Mac OS X 10.5/.test(vgplayer.USER_AGENT))},vgplayer.Html5.prototype.enterFullScreen=function(){var a=this.el_;a.paused&&a.networkState<=a.HAVE_METADATA?(this.el_.play(),setTimeout(function(){a.pause(),a.webkitEnterFullScreen()},0)):a.webkitEnterFullScreen()},vgplayer.Html5.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},vgplayer.Html5.prototype.src=function(a){this.el_.src=a},vgplayer.Html5.prototype.load=function(){this.el_.load()},vgplayer.Html5.prototype.currentSrc=function(){return this.el_.currentSrc},vgplayer.Html5.prototype.poster=function(){return this.el_.poster},vgplayer.Html5.prototype.setPoster=function(a){this.el_.poster=a},vgplayer.Html5.prototype.preload=function(){return this.el_.preload},vgplayer.Html5.prototype.setPreload=function(a){this.el_.preload=a},vgplayer.Html5.prototype.autoplay=function(){return this.el_.autoplay},vgplayer.Html5.prototype.setAutoplay=function(a){this.el_.autoplay=a},vgplayer.Html5.prototype.controls=function(){return this.el_.controls},vgplayer.Html5.prototype.setControls=function(a){this.el_.controls=!!a},vgplayer.Html5.prototype.loop=function(){return this.el_.loop},vgplayer.Html5.prototype.setLoop=function(a){this.el_.loop=a},vgplayer.Html5.prototype.error=function(){return this.el_.error},vgplayer.Html5.prototype.seeking=function(){return this.el_.seeking},vgplayer.Html5.prototype.ended=function(){return this.el_.ended},vgplayer.Html5.prototype.defaultMuted=function(){return this.el_.defaultMuted},vgplayer.Html5.prototype.playbackRate=function(){return this.el_.playbackRate},vgplayer.Html5.prototype.setPlaybackRate=function(a){this.el_.playbackRate=a},vgplayer.Html5.prototype.networkState=function(){return this.el_.networkState},vgplayer.Html5.isSupported=function(){try{vgplayer.TEST_VID.volume=.5}catch(a){return!1}return!!vgplayer.TEST_VID.canPlayType},vgplayer.Html5.canPlaySource=function(a){try{return!!vgplayer.TEST_VID.canPlayType(a.type)}catch(b){return""}},vgplayer.Html5.canControlVolume=function(){var a=vgplayer.TEST_VID.volume;return vgplayer.TEST_VID.volume=a/2+.1,a!==vgplayer.TEST_VID.volume},vgplayer.Html5.canControlPlaybackRate=function(){var a=vgplayer.TEST_VID.playbackRate;return vgplayer.TEST_VID.playbackRate=a/2+.1,a!==vgplayer.TEST_VID.playbackRate},function(){var a,b=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,c=/^video\/mp4/i;vgplayer.Html5.patchCanPlayType=function(){vgplayer.ANDROID_VERSION>=4&&(a||(a=vgplayer.TEST_VID.constructor.prototype.canPlayType),vgplayer.TEST_VID.constructor.prototype.canPlayType=function(c){return c&&b.test(c)?"maybe":a.call(this,c)}),vgplayer.IS_OLD_ANDROID&&(a||(a=vgplayer.TEST_VID.constructor.prototype.canPlayType),vgplayer.TEST_VID.constructor.prototype.canPlayType=function(b){return b&&c.test(b)?"maybe":a.call(this,b)})},vgplayer.Html5.unpatchCanPlayType=function(){var b=vgplayer.TEST_VID.constructor.prototype.canPlayType;return vgplayer.TEST_VID.constructor.prototype.canPlayType=a,a=null,b},vgplayer.Html5.patchCanPlayType()}(),vgplayer.Html5.Events="loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange".split(","),vgplayer.Html5.disposeMediaElement=function(a){if(a){for(a.player=null,a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src"),"function"==typeof a.load&&!function(){try{a.load()}catch(b){}}()}},vgplayer.MediaLoader=vgplayer.Component.extend({init:function(a,b,c){if(vgplayer.Component.call(this,a,b,c),a.options_.sources&&0!==a.options_.sources.length)a.src(a.options_.sources);else for(var d=0,e=a.options_.techOrder;d<e.length;d++){var f=vgplayer.capitalize(e[d]),g=window.vgplayer[f];if(g&&g.isSupported()){a.loadTech(f);break}}}}),vgplayer.JSON,"undefined"!=typeof window.JSON&&"function"===window.JSON.parse)vgplayer.JSON=window.JSON;else{vgplayer.JSON={};var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;vgplayer.JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse(): invalid or malformed JSON data")}}vgplayer.autoSetup=function(){var a,b,c,d=document.getElementsByTagName("video");if(d&&d.length>0)for(var e=0,f=d.length;f>e;e++){if(b=d[e],!b||!b.getAttribute){vgplayer.autoSetupTimeout(1);break}void 0===b.player&&(a=b.getAttribute("data-setup"),null!==a&&(a=vgplayer.JSON.parse(a||"{}"),c=vgplayer(b,a)))}else vgplayer.windowLoaded||vgplayer.autoSetupTimeout(1)},vgplayer.autoSetupTimeout=function(a){setTimeout(vgplayer.autoSetup,a)},"complete"===document.readyState?vgplayer.windowLoaded=!0:vgplayer.one(window,"load",function(){vgplayer.windowLoaded=!0}),vgplayer.autoSetupTimeout(1),vgplayer.plugin=function(a,b){vgplayer.Player.prototype[a]=b},function(a,b,c,d){"use strict";var e=function(a){var b,c,d;for(c=1;c<arguments.length;c++){b=arguments[c];for(d in b)b.hasOwnProperty(d)&&(a[d]=b[d])}return a},f=function(a,b,c){var d,e,f=Object.prototype.toString.call(b),g=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c);else if(a.on)a.on(b,c);else{if(!a.attachEvent)throw new Error("object has no mechanism for adding event listeners");a.attachEvent("on"+b,c)}};switch(f){case"[object String]":g(a,b,c);break;case"[object Array]":for(d=0,e=b.length;e>d;d++)g(a,b[d],c);break;case"[object Object]":for(d in b)b.hasOwnProperty(d)&&g(a,d,b[d]);break;default:throw new Error("Unrecognized events parameter type: "+f)}return a},g=function(b){return(a.setImmediate||a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame||a.setTimeout)(b,0)},h=function(b){return(a.clearImmediate||a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.mozCancelAnimationFrame||a.clearTimeout)(b)},i=function(a){a.ads.cancelPlayTimeout||(a.ads.cancelPlayTimeout=g(function(){a.ads.cancelPlayTimeout=null,a.paused()||a.pause()}))},j=function(a){var b=a.el().querySelector(".vgplayer-tech"),c={src:a.currentSrc(),currentTime:a.currentTime(),type:a.currentType()};return b&&(c.nativePoster=b.poster),c},k=function(a,b){for(var c=a.className.split(/\s+/),d=c.length,e=[];d--;)c[d]!==b&&e.push(c[d]);a.className=e.join(" ")},l=function(a,b){var c,e=a.el().querySelector(".vgplayer-tech"),f=20,g=function(){a.currentTime(b.currentTime),a.ended()||a.play()},h=function(){return e.seekable===d?void g():e.seekable.length>0?void g():void(f--&&setTimeout(h,50))};b.nativePoster&&(e.poster=b.nativePoster),c=a.src()?a.src()===b.src:a.currentSrc()===b.src,c&&!a.ended()?a.play():(a.src({src:b.src,type:b.type}),a.load(),a.one("loadedmetadata",h))},m=function(a){var b=a.el().querySelector(".vgplayer-tech");b&&b.removeAttribute("poster")},n={timeout:3e3,prerollTimeout:100,debug:!1},o=function(b){var d,o=this,p=e({},n,b||{});o.ads={state:"content-set",startLinearAdMode:function(){o.trigger("adstart")},endLinearAdMode:function(){o.trigger("adend")}},d=function(b){var d={"content-set":{events:{adsready:function(){this.state="ads-ready"},play:function(){this.state="ads-ready?",i(o),m(o)}}},"ads-ready":{events:{play:function(){this.state="preroll?",i(o)}}},"preroll?":{enter:function(){o.el().className+=" vgplayer-ad-loading",o.ads.timeout=a.setTimeout(function(){o.trigger("adtimeout")},p.prerollTimeout),o.trigger("readyforpreroll")},leave:function(){a.clearTimeout(o.ads.timeout),h(o.ads.cancelPlayTimeout),o.ads.cancelPlayTimeout=null,k(o.el(),"vgplayer-ad-loading")},events:{play:function(){i(o)},adstart:function(){this.state="ad-playback",o.el().className+=" vgplayer-ad-playing"},adtimeout:function(){this.state="content-playback",o.play()}}},"ads-ready?":{enter:function(){o.el().className+=" vgplayer-ad-loading",o.ads.timeout=a.setTimeout(function(){o.trigger("adtimeout")},p.timeout)},leave:function(){a.clearTimeout(o.ads.timeout),k(o.el(),"vgplayer-ad-loading")},events:{play:function(){i(o)},adsready:function(){this.state="preroll?"},adtimeout:function(){this.state="ad-timeout-playback"}}},"ad-timeout-playback":{events:{adsready:function(){o.paused()?this.state="ads-ready":this.state="preroll?"},contentupdate:function(){o.paused()?this.state="content-set":this.state="ads-ready?"}}},"ad-playback":{enter:function(){this.snapshot=j(o),m(o)},leave:function(){k(o.el(),"vgplayer-ad-playing"),l(o,this.snapshot)},events:{adend:function(){this.state="content-playback"}}},"content-playback":{events:{adstart:function(){this.state="ad-playback",o.el().className+=" vgplayer-ad-playing",m(o)},contentupdate:function(){o.paused()?this.state="content-set":this.state="ads-ready?"}}}};!function(a){var e=function(){};(d[a].events[b.type]||e).apply(o.ads),a!==o.ads.state&&((d[a].leave||e).apply(o.ads),(d[o.ads.state].enter||e).apply(o.ads),p.debug&&c.log("ads",a+" -> "+o.ads.state))}(o.ads.state)},f(o,c.Html5.Events.concat(["adtimeout","contentupdate","adsready","adstart","adend"]),d),function(){var a,b=function(){var b;"ad-playback"!==o.ads.state&&(b=o.currentSrc(),b!==a&&(o.trigger({type:"contentupdate",oldValue:a,newValue:b}),a=b))};o.on("loadstart",b),g(b)}(),o.paused()||d({type:"play"})};c.plugin("ads",o)}(window,document,vgplayer),!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.DMVAST=a()}}(function(){return function a(b,c,d){function e(g,h){
if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length))throw b=arguments[1],b instanceof Error?b:TypeError('Uncaught, unspecified "error" event.');if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}],2:[function(a,b,c){var d;d=function(){function a(){this.errorURLTemplates=[],this.impressionURLTemplates=[],this.creatives=[]}return a}(),b.exports=d},{}],3:[function(a,b,c){var d,e,f;e=a("./parser.coffee"),f=a("./util.coffee"),d=function(){function a(){}return a.cappingFreeLunch=0,a.cappingMinimumTimeInterval=0,a.timeout=0,a.get=function(a,b){var c;return c=+new Date,this.totalCallsTimeout<c?(this.totalCalls=1,this.totalCallsTimeout=c+36e5):this.totalCalls++,this.cappingFreeLunch>=this.totalCalls?void b(null):c-this.lastSuccessfullAd<this.cappingMinimumTimeInterval?void b(null):e.parse(a,function(a){return function(a){return b(a)}}(this))},function(){var b,c;c=f.storage,b=Object.defineProperty,["lastSuccessfullAd","totalCalls","totalCallsTimeout"].forEach(function(d){b(a,d,{get:function(){return c.getItem(d)},set:function(a){return c.setItem(d,a)},configurable:!1,enumerable:!0})}),null==a.totalCalls&&(a.totalCalls=0),null==a.totalCallsTimeout&&(a.totalCallsTimeout=0)}(),a}(),b.exports=d},{"./parser.coffee":8,"./util.coffee":14}],4:[function(a,b,c){var d;d=function(){function a(){this.id=null,this.width=0,this.height=0,this.type=null,this.staticResource=null,this.companionClickThroughURLTemplate=null,this.trackingEvents={}}return a}(),b.exports=d},{}],5:[function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=function(){function a(){this.trackingEvents={}}return a}(),f=function(a){function b(){b.__super__.constructor.apply(this,arguments),this.type="linear",this.duration=0,this.skipDelay=null,this.mediaFiles=[],this.videoClickThroughURLTemplate=null,this.videoClickTrackingURLTemplates=[]}return i(b,a),b}(d),g=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b}(d),e=function(){function a(){this.type="companion",this.variations=[],this.videoClickTrackingURLTemplates=[]}return a}(),b.exports={VASTCreativeLinear:f,VASTCreativeNonLinear:g,VASTCreativeCompanion:e}},{}],6:[function(a,b,c){b.exports={client:a("./client.coffee"),tracker:a("./tracker.coffee"),parser:a("./parser.coffee"),util:a("./util.coffee")}},{"./client.coffee":3,"./parser.coffee":8,"./tracker.coffee":10,"./util.coffee":14}],7:[function(a,b,c){var d;d=function(){function a(){this.fileURL=null,this.deliveryType="progressive",this.mimeType=null,this.codec=null,this.bitrate=0,this.minBitrate=0,this.maxBitrate=0,this.width=0,this.height=0}return a}(),b.exports=d},{}],8:[function(a,b,c){var d,e,f,g,h,i,j,k,l,m=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};d=a("./urlhandler.coffee"),k=a("./response.coffee"),e=a("./ad.coffee"),l=a("./util.coffee"),h=a("./creative.coffee").VASTCreativeLinear,g=a("./creative.coffee").VASTCreativeCompanion,i=a("./mediafile.coffee"),f=a("./companionad.coffee"),j=function(){function a(){}var b;return b=[],a.addURLTemplateFilter=function(a){"function"==typeof a&&b.push(a)},a.removeURLTemplateFilter=function(){return b.pop()},a.countURLTemplateFilters=function(){return b.length},a.clearUrlTemplateFilters=function(){return b=[]},a.parse=function(a,b){return this._parse(a,null,function(a,c){return b(c)})},a._parse=function(a,c,e){var f,g,h;for(g=0,h=b.length;h>g;g++)f=b[g],a=f(a);return null==c&&(c=[]),c.push(a),d.get(a,function(b){return function(d,f){var g,h,i,j,n,o,p,q,r,s,t;if(null!=d)return e(d);if(n=new k,null==(null!=f?f.documentElement:void 0)||"VAST"!==f.documentElement.nodeName)return e();for(s=f.documentElement.childNodes,o=0,q=s.length;q>o;o++)j=s[o],"Error"===j.nodeName&&n.errorURLTemplates.push(b.parseNodeText(j));for(t=f.documentElement.childNodes,p=0,r=t.length;r>p;p++)j=t[p],"Ad"===j.nodeName&&(g=b.parseAdElement(j),null!=g?n.ads.push(g):l.track(n.errorURLTemplates,{ERRORCODE:101}));for(h=function(){var a,b,c;if(n){for(c=n.ads,a=0,b=c.length;b>a;a++)if(g=c[a],null!=g.nextWrapperURL)return;return 0===n.ads.length&&(l.track(n.errorURLTemplates,{ERRORCODE:303}),n=null),e(null,n)}},i=n.ads.length;i--;)g=n.ads[i],null!=g.nextWrapperURL&&!function(d){var e,f;return c.length>=10||(f=d.nextWrapperURL,m.call(c,f)>=0)?(l.track(d.errorURLTemplates,{ERRORCODE:302}),n.ads.splice(n.ads.indexOf(d),1),void h()):(-1===d.nextWrapperURL.indexOf("://")&&(e=a.slice(0,a.lastIndexOf("/")),d.nextWrapperURL=""+e+"/"+d.nextWrapperURL),b._parse(d.nextWrapperURL,c,function(a,b){var c,e,f,g,i,j,k,m,o,p,q,r,s,t;if(null!=a)l.track(d.errorURLTemplates,{ERRORCODE:301}),n.ads.splice(n.ads.indexOf(d),1);else if(null==b)l.track(d.errorURLTemplates,{ERRORCODE:303}),n.ads.splice(n.ads.indexOf(d),1);else for(n.errorURLTemplates=n.errorURLTemplates.concat(b.errorURLTemplates),f=n.ads.indexOf(d),n.ads.splice(f,1),r=b.ads,j=0,k=r.length;k>j;j++){if(g=r[j],g.errorURLTemplates=d.errorURLTemplates.concat(g.errorURLTemplates),g.impressionURLTemplates=d.impressionURLTemplates.concat(g.impressionURLTemplates),null!=d.trackingEvents)for(s=g.creatives,p=0,m=s.length;m>p;p++)if(c=s[p],"linear"===c.type)for(t=Object.keys(d.trackingEvents),q=0,o=t.length;o>q;q++)e=t[q],(i=c.trackingEvents)[e]||(i[e]=[]),c.trackingEvents[e]=c.trackingEvents[e].concat(d.trackingEvents[e]);if(null!=d.videoClickTrackingURLTemplates)for(_ref6=g.creatives,_o=0,_len6=_ref6.length;_o<_len6;_o++)c=_ref6[_o],c.videoClickTrackingURLTemplates=c.videoClickTrackingURLTemplates.concat(d.videoClickTrackingURLTemplates);n.ads.splice(f,0,g)}return delete d.nextWrapperURL,h()}))}(g);return h()}}(this))},a.childByName=function(a,b){var c,d,e,f;for(f=a.childNodes,d=0,e=f.length;e>d;d++)if(c=f[d],c.nodeName===b)return c},a.childsByName=function(a,b){var c,d,e,f,g;for(d=[],g=a.childNodes,e=0,f=g.length;f>e;e++)c=g[e],c.nodeName===b&&d.push(c);return d},a.parseAdElement=function(a){var b,c,d,e;for(e=a.childNodes,c=0,d=e.length;d>c;c++){if(b=e[c],"Wrapper"===b.nodeName)return this.parseWrapperElement(b);if("InLine"===b.nodeName)return this.parseInLineElement(b)}},a.parseWrapperElement=function(a){var b,c,d,e,f,g,h;for(b=this.parseInLineElement(a),e=this.childByName(a,"VASTAdTagURI"),null!=e&&(b.nextWrapperURL=this.parseNodeText(e)),d=null,h=b.creatives,f=0,g=h.length;g>f;f++)if(c=h[f],"linear"===c.type){d=c;break}return null!=d&&(null!=d.trackingEvents&&(b.trackingEvents=d.trackingEvents),null!=d.videoClickTrackingURLTemplates&&(b.videoClickTrackingURLTemplates=d.videoClickTrackingURLTemplates)),null!=b.nextWrapperURL?b:void 0},a.parseInLineElement=function(a){var b,c,d,f,g,h,i,j,k,l,m,n,o,p;for(b=new e,n=a.childNodes,h=0,k=n.length;k>h;h++)switch(g=n[h],g.nodeName){case"Error":b.errorURLTemplates.push(this.parseNodeText(g));break;case"Impression":b.impressionURLTemplates.push(this.parseNodeText(g));break;case"Creatives":for(o=this.childsByName(g,"Creative"),i=0,l=o.length;l>i;i++)for(d=o[i],p=d.childNodes,j=0,m=p.length;m>j;j++)switch(f=p[j],f.nodeName){case"Linear":c=this.parseCreativeLinearElement(f),c&&b.creatives.push(c);break;case"CompanionAds":c=this.parseCompanionAd(f),c&&b.creatives.push(c)}}return b},a.parseCreativeLinearElement=function(a){var b,c,d,e,f,g,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;if(b=new h,b.duration=this.parseDuration(this.parseNodeText(this.childByName(a,"Duration"))),-1===b.duration&&"Wrapper"!==a.parentNode.parentNode.parentNode.nodeName)return null;if(j=a.getAttribute("skipoffset"),null==j?b.skipDelay=null:"%"===j.charAt(j.length-1)?(g=parseInt(j,10),b.skipDelay=b.duration*(g/100)):b.skipDelay=this.parseDuration(j),n=this.childByName(a,"VideoClicks"),null!=n)for(b.videoClickThroughURLTemplate=this.parseNodeText(this.childByName(n,"ClickThrough")),x=this.childsByName(n,"ClickTracking"),p=0,t=x.length;t>p;p++)clickTrackingElement=x[p],b.videoClickTrackingURLTemplates.push(this.parseNodeText(clickTrackingElement));for(x=this.childsByName(a,"TrackingEvents"),p=0,t=x.length;t>p;p++)for(l=x[p],y=this.childsByName(l,"Tracking"),q=0,u=y.length;u>q;q++)k=y[q],c=k.getAttribute("event"),m=this.parseNodeText(k),null!=c&&null!=m&&(null==(o=b.trackingEvents)[c]&&(o[c]=[]),b.trackingEvents[c].push(m));for(z=this.childsByName(a,"MediaFiles"),r=0,v=z.length;v>r;r++)for(f=z[r],A=this.childsByName(f,"MediaFile"),s=0,w=A.length;w>s;s++)e=A[s],d=new i,d.id=e.getAttribute("id"),d.fileURL=this.parseNodeText(e),d.deliveryType=e.getAttribute("delivery"),d.codec=e.getAttribute("codec"),d.mimeType=e.getAttribute("type"),d.bitrate=parseInt(e.getAttribute("bitrate")||0),d.minBitrate=parseInt(e.getAttribute("minBitrate")||0),d.maxBitrate=parseInt(e.getAttribute("maxBitrate")||0),d.width=parseInt(e.getAttribute("width")||0),d.height=parseInt(e.getAttribute("height")||0),b.mediaFiles.push(d);return b},a.parseCompanionAd=function(a){var b,c,d,e,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;for(d=new g,u=this.childsByName(a,"Companion"),m=0,q=u.length;q>m;m++){for(c=u[m],b=new f,b.id=c.getAttribute("id")||null,b.width=c.getAttribute("width"),b.height=c.getAttribute("height"),v=this.childsByName(c,"StaticResource"),n=0,r=v.length;r>n;n++)h=v[n],b.type=h.getAttribute("creativeType")||0,b.staticResource=this.parseNodeText(h);for(w=this.childsByName(c,"TrackingEvents"),o=0,s=w.length;s>o;o++)for(j=w[o],x=this.childsByName(j,"Tracking"),p=0,t=x.length;t>p;p++)i=x[p],e=i.getAttribute("event"),k=this.parseNodeText(i),null!=e&&null!=k&&(null==(l=b.trackingEvents)[e]&&(l[e]=[]),b.trackingEvents[e].push(k));b.companionClickThroughURLTemplate=this.parseNodeText(this.childByName(c,"CompanionClickThrough")),d.variations.push(b)}return d},a.parseDuration=function(a){var b,c,d,e,f;return null==a?-1:(b=a.split(":"),3!==b.length?-1:(f=b[2].split("."),e=parseInt(f[0]),2===f.length&&(e+=parseFloat("0."+f[1])),d=parseInt(60*b[1]),c=parseInt(60*b[0]*60),isNaN(c||isNaN(d||isNaN(e||d>3600||e>60)))?-1:c+d+e))},a.parseNodeText=function(a){return a&&(a.textContent||a.text)},a}(),b.exports=j},{"./ad.coffee":2,"./companionad.coffee":4,"./creative.coffee":5,"./mediafile.coffee":7,"./response.coffee":9,"./urlhandler.coffee":11,"./util.coffee":14}],9:[function(a,b,c){var d;d=function(){function a(){this.ads=[],this.errorURLTemplates=[]}return a}(),b.exports=d},{}],10:[function(a,b,c){var d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("./client.coffee"),h=a("./util.coffee"),f=a("./creative.coffee").VASTCreativeLinear,d=a("events").EventEmitter,g=function(a){function b(a,b){var c,d,g;this.ad=a,this.creative=b,this.muted=!1,this.impressed=!1,this.skipable=!1,this.skipDelayDefault=-1,this.trackingEvents={},this.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],g=b.trackingEvents;for(c in g)d=g[c],this.trackingEvents[c]=d.slice(0);b instanceof f?(this.assetDuration=b.duration,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100},this.skipDelay=b.skipDelay,this.linear=!0,this.clickThroughURLTemplate=b.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=b.videoClickTrackingURLTemplates):(this.skipDelay=-1,this.linear=!1),this.on("start",function(){e.lastSuccessfullAd=+new Date})}return j(b,a),b.prototype.setProgress=function(a){var b,c,d,e,f,g,h,i,j;if(f=null===this.skipDelay?this.skipDelayDefault:this.skipDelay,-1===f||this.skipable||(f>a?this.emit("skip-countdown",f-a):(this.skipable=!0,this.emit("skip-countdown",0))),this.linear&&this.assetDuration>0){if(c=[],a>0){c.push("start"),d=Math.round(a/this.assetDuration*100),c.push("progress-"+d+"%"),j=this.quartiles;for(e in j)g=j[e],a>=g&&g+1>=a&&c.push(e)}for(h=0,i=c.length;i>h;h++)b=c[h],this.track(b,!0);a<this.progress&&this.track("rewind")}return this.progress=a},b.prototype.setMuted=function(a){return this.muted!==a&&this.track(a?"muted":"unmuted"),this.muted=a},b.prototype.setPaused=function(a){return this.paused=a},b.prototype.setFullscreen=function(a){return this.fullscreen!==a&&this.track(a?"fullscreen":"exitFullscreen"),this.fullscreen=a},b.prototype.setSkipDelay=function(a){return"number"==typeof a?this.skipDelay=a:void 0},b.prototype.load=function(){return this.impressed?void 0:(this.impressed=!0,console.log("iplayer.ads.load impression"),this.trackURLs(this.ad.impressionURLTemplates),this.track("creativeView"))},b.prototype.errorWithCode=function(a){return this.trackURLs(this.ad.errorURLTemplates,{ERRORCODE:a})},b.prototype.complete=function(){return this.track("complete")},b.prototype.stop=function(){return this.track(this.linear?"closeLinear":"close")},b.prototype.skip=function(){return console.log("iplayer.ads.skip"),this.track("skip"),this.trackingEvents=[]},b.prototype.click=function(){console.log("iplayer.ads.click");var a,b;return null!=this.clickTrackingURLTemplates&&this.trackURLs(this.clickTrackingURLTemplates),null!=this.clickThroughURLTemplate?(this.linear&&(b={CONTENTPLAYHEAD:this.progressFormated()}),a=h.resolveURLTemplates([this.clickThroughURLTemplate],b)[0],this.emit("clickthrough",a)):void 0},b.prototype.track=function(a,b){var c,d;null==b&&(b=!1),"closeLinear"===a&&null==this.trackingEvents[a]&&null!=this.trackingEvents.close&&(a="close"),d=this.trackingEvents[a],c=this.emitAlwaysEvents.indexOf(a),null!=d?(this.emit(a,""),this.trackURLs(d)):-1!==c&&this.emit(a,""),b===!0&&(delete this.trackingEvents[a],c>-1&&this.emitAlwaysEvents.splice(c,1))},b.prototype.trackURLs=function(a,b){return null==b&&(b={}),this.linear&&(b.CONTENTPLAYHEAD=this.progressFormated()),h.track(a,b)},b.prototype.progressFormated=function(){var a,b,c,d,e;return e=parseInt(this.progress),a=e/3600,a.length<2&&(a="0"+a),b=e/60%60,b.length<2&&(b="0"+b),d=e%60,d.length<2&&(d="0"+b),c=parseInt(100*(this.progress-e)),""+a+":"+b+":"+d+"."+c},b}(d),b.exports=g},{"./client.coffee":3,"./creative.coffee":5,"./util.coffee":14,events:1}],11:[function(a,b,c){var d,e,f;f=a("./urlhandlers/xmlhttprequest.coffee"),e=a("./urlhandlers/flash.coffee"),d=function(){function b(){}return b.get=function(b,c){return"undefined"==typeof window||null===window?a("./urlhandlers/node.coffee").get(b,c):f.supported()?f.get(b,c):e.supported()?e.get(b,c):c()},b}(),b.exports=d},{"./urlhandlers/flash.coffee":12,"./urlhandlers/xmlhttprequest.coffee":13}],12:[function(a,b,c){var d;d=function(){function a(){}return a.xdr=function(){var a;return window.XDomainRequest&&(a=new XDomainRequest),a},a.supported=function(){return!!this.xdr()},a.get=function(a,b){var c,d;return(d="function"==typeof window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLDOM"):void 0)?(d.async=!1,c=this.xdr(),c.open("GET",a),c.send(),c.onload=function(){return d.loadXML(c.responseText),b(null,d)}):b()},a}(),b.exports=d},{}],13:[function(a,b,c){var d;d=function(){function a(){}return a.xhr=function(){var a;return a=new window.XMLHttpRequest,"withCredentials"in a?a:void 0},a.supported=function(){return!!this.xhr()},a.get=function(a,b){var c;return c=this.xhr(),c.open("GET",a),c.send(),c.onreadystatechange=function(){return 4===c.readyState?b(null,c.responseXML):void 0}},a}(),b.exports=d},{}],14:[function(a,b,c){var d;d=function(){function a(){}return a.track=function(a,b){var c,d,e,f,g,h;for(d=this.resolveURLTemplates(a,b),h=[],f=0,g=d.length;g>f;f++)c=d[f],"undefined"!=typeof window&&null!==window&&(e=new Image,h.push(e.src=c));return h},a.resolveURLTemplates=function(a,b){var c,d,e,f,g,h,i,j,k;d=[],null==b&&(b={}),"CACHEBUSTING"in b||(b.CACHEBUSTING=Math.round(1e10*Math.random())),b.random=b.CACHEBUSTING;for(j=0,k=a.length;k>j;j++)if(c=a[j],h=c,void 0!==h){for(e in b)i=b[e],f="["+e+"]",g="%%"+e+"%%",h=h.replace(f,i),h=h.replace(g,i);d.push(h)}return d},a.storage=function(){var a,b,c,d;try{c="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){d=e,c=null}return b=function(a){var b,c;try{if(c="__VASTUtil__",a.setItem(c,c),a.getItem(c)!==c)return!0}catch(d){return b=d,!0}return!1},(null==c||b(c))&&(a={},c={length:0,getItem:function(b){return a[b]},setItem:function(b,c){a[b]=c,this.length=Object.keys(a).length},removeItem:function(b){delete a[b],this.length=Object.keys(a).length},clear:function(){a={},this.length=0}}),c}(),a}(),b.exports=d},{}]},{},[6])(6)}),function(a,b){"use strict";var c=function(a){var b,c,d;for(c=1;c<arguments.length;c++){b=arguments[c];for(d in b)b.hasOwnProperty(d)&&(a[d]=b[d])}return a},d=function(d){var e=this,f=[],g={skip:0,prerolls:[],midrolls:[]},h=c({},g,d||{});if(h.prerolls[0].played=!1,h.prerolls.length>1)for(var i=1;i<h.prerolls.length;i++)h.prerolls[i].played=!1;var j={adPlaying:!0};if(void 0===e.ads)return void console.log("VAST requires vgplayer-contrib-ads");var k=document.createElement("div");k.className="happy-notice",e.vast.notice=k,e.el().appendChild(k),e.on("contentupdate",function(){h.prerolls.length>0&&(h.prerolls[0].get||e.vast.getContent(h.prerolls[0].url,!1,0))}),e.on("readyforpreroll",function(){h.prerolls.length>0&&null==e.error()&&(h.prerolls[0].played||(h.prerolls[0].played=!0,h.skip=h.prerolls[0].skip,e.vast.play()))}),e.on("timeupdate",function(){var a=e.currentTime(),b=!1,c=0;if(0==h.midrolls.length)return!1;if("lastTime"in j)if(e.duration()>2460)if(1200>a&&10>1200-a?j.midrollPlayedAt||(c=1200-a):2400>a&&10>2400-a?j.midrollPlayedAt2nd||(c=2400-a):c=0,c>0&&(e.vast.notice.classList.add("active"),e.vast.notice.innerHTML="Quảng cáo sẽ xuất hiện sau "+Math.ceil(c)+" giây"),j.markerBreaks||(j.markerBreaks=[1200,2400],e.vast.createMarkers(e.duration())),2400>a){if(j.midrollPlayed)return!1;b=a>1200&&j.lastTime<1200,b&&(j.midrollPlayed=!0)}else{if(j.midrollPlayedAt2nd)return!1;b=a>2400&&j.lastTime<2400,b&&(j.midrollPlayedAt2nd=!0)}else{if(!(e.duration()>900))return!1;if(h.midrolls[0].time>a&&h.midrolls[0].time-a<10?j.midrollPlayed||(c=h.midrolls[0].time-a):1200>a&&10>1200-a?j.midrollPlayedAt2nd||(c=1200-a):c=0,c>0&&(e.vast.notice.classList.add("active"),e.vast.notice.innerHTML="Quảng cáo sẽ xuất hiện sau "+Math.ceil(c)+" giây"),j.markerBreaks||(e.duration()>1200?j.markerBreaks=[h.midrolls[0].time,1200]:j.markerBreaks=[h.midrolls[0].time],e.vast.createMarkers(e.duration())),1200>a){if(j.midrollPlayed)return;b=a>h.midrolls[0].time&&j.lastTime<h.midrolls[0].time,b&&(j.midrollPlayed=!0)}else{if(j.midrollPlayedAt2nd)return!1;b=a>1200&&j.lastTime<1200,b&&(j.midrollPlayedAt2nd=!0)}}j.lastTime=a,b&&(h.midrolls.length>1&&j.midrollPlayedAt2nd?(h.skip=h.midrolls[1].skip,e.vast.getContent(h.midrolls[1].url,!0)):(h.skip=h.midrolls[0].skip,e.vast.getContent(h.midrolls[0].url,!0)))}),e.on("adtimeout",function(){console.log("iplayer.ads.timeout");try{e.vast.notice.classList.remove("active")}catch(a){}if(j.adPlaying)e.trigger("adstart"),e.vast.tearDown();else{console.log("iplayer.play content");try{e.play()}catch(a){}}}),e.vast.fetchData=function(a,c,d){if(!a)return j.status="fail",e.trigger("adtimeout"),!1;try{if(a.ads[0].creatives.length<1)return j.status="fail",!1}catch(f){}for(var g=0;g<a.ads.length;g++){var i=a.ads[g];e.vast.companion=void 0;for(var k=0;k<i.creatives.length;k++){var l=i.creatives[k],m=!1,n=!1;if("linear"!==l.type||m)"companion"!==l.type||n||(e.vast.companion=l,n=!0);else if(l.mediaFiles.length){if(e.vast.sources=e.vast.createSourceObjects(l.mediaFiles),!e.vast.sources.length)return void e.trigger("adtimeout");e.vastTracker=new b.tracker(i,l);var o=!1,p=function(){this.vastTracker.load(),e.vast.countdown();try{store.get("volume")?store.get("volume")>.4?this.volume(.4):this.volume(store.get("volume")):this.volume(.4)}catch(a){}},q=function(){e.vast.countdown();try{this.volume(store.get("volume"))}catch(a){}},r=function(){isNaN(this.vastTracker.assetDuration)&&(this.vastTracker.assetDuration=this.duration()),this.vastTracker.setProgress(this.currentTime())},s=function(){this.vastTracker.setPaused(!1)},t=function(){this.vastTracker.setPaused(!0)},u=function(){b.util.track(i.errorURLTemplates,{ERRORCODE:405}),o=!0,e.trigger("ended")};e.on("adstart",p),e.on("adend",q),e.on("timeupdate",r),e.on("play",s),e.on("pause",t),e.on("error",u),e.one("ended",function(){e.off("adstart",p),e.off("timeupdate",r),e.off("play",s),e.off("pause",t),e.off("error",u),o||this.vastTracker.complete()}),m=!0}}if(e.vastTracker){e.trigger("adsready");break}b.util.track(i.errorURLTemplates,{ERRORCODE:403})}j.status=void 0,c&&(d&&(h.prerolls[d].played=!0),e.vast.play()),e.vastTracker||(j.status="fail",e.trigger("adtimeout"))},e.vast.getContent=function(a,c,d){e.vast.notice.classList.add("active"),e.vast.notice.innerHTML="Đang tải quảng cáo",Number.isInteger(d)?(h.prerolls[d].get=!0,console.log("iplayer.ads.get preroll "+d+", url: "+a)):console.log("iplayer.ads.get midroll, url: "+a),b.client.get(a,function(a){if(a)f[d]=a,e.vast.fetchData(a,c,d);else{if(Number.isInteger(d)){if(d<h.prerolls.length)for(var b=d;b<h.prerolls.length;b++)if(!h.prerolls[b].played)return h.prerolls[b].played=!0,void 0!=f[b]?e.vast.fetchData(f[b],!0,b):(console.log("iplayer.ads.get preroll "+b+" has no response..."),b+1<h.prerolls.length?(console.log("next"),e.vast.getContent(h.prerolls[b+1].url,c,b+1)):e.vast.tearDown()),!1}else console.log("iplayer.ads.get midroll has no response...");e.vast.tearDown()}})},e.vast.play=function(){if("fail"==j.status)return e.vast.tearDown(),!1;e.ads.startLinearAdMode(),j.adPlaying=!0,e.autoplay(!0);var c=e.vast.sources;if(!c)return e.vast.tearDown(),!1;try{if("video/mp4"!==c[0].type)return e.vast.tearDown(),!1}catch(d){return e.vast.tearDown(),!1}for(var f=0;f<c.length;f++){c[f].src=c[f].src.replace("http//","http://"),c[f].src=c[f].src.replace("https//","https://");var g=c[f].src.split("http");g.length<2&&(c[f].src="http://"+c[f].src)}e.src(c),e.controls(!1);var i;e.vastTracker.clickThroughURLTemplate&&(i=b.util.resolveURLTemplates([e.vastTracker.clickThroughURLTemplate],{CACHEBUSTER:Math.round(1e10*Math.random()),CONTENTPLAYHEAD:e.vastTracker.progressFormated()})[0]);var k=a.createEl("div",{className:"happy-skip-button"}),l=a.createEl("a",{className:"happy-blocker",href:i,target:"_blank"});h.skip<0&&(k.style.display="none"),e.vast.skipButton=k,e.el().appendChild(k);var m=e.vastTracker.clickTrackingURLTemplates;l.onclick=function(){if(console.log("iplayer.ads.click"),m)for(var a=0;a<m.length;a++)console.log(" + "+m[a]),e.vastTracker.trackURLs([m[a]]);e.trigger("adclick"),h.skip=0},e.vast.blocker=l,e.el().insertBefore(l,e.controlBar.el()),e.on("timeupdate",e.vast.timeupdate),k.onclick=function(a){return(" "+e.vast.skipButton.className+" ").indexOf(" enabled ")>=0&&(e.vastTracker.skip(),e.vast.tearDown()),void 0===Event.prototype.stopPropagation?!1:void a.stopPropagation()},e.one("ended",e.vast.tearDown)},e.vast.tearDown=function(){try{e.vast.notice.classList.remove("active");var a=document.querySelectorAll(".happy-blocker"),b=document.querySelectorAll(".happy-skip-button");if(a.length>0)for(var c=0;c<a.length;c++)a[c].parentNode.removeChild(a[c]);if(b.length>0)for(var c=0;c<b.length;c++)b[c].parentNode.removeChild(b[c])}catch(d){console.log(d)}if(h.prerolls.length>1)for(var c=1;c<h.prerolls.length;c++)if(!h.prerolls[c].played)return h.skip=h.prerolls[c].skip,h.prerolls[c].played=!0,void 0!=f[c]?(console.log("iplayer.ads.get preroll "+c+" has response from autoget before"),e.vast.fetchData(f[c],!1,c),e.vast.play(),!1):(console.log("iplayer.ads.get preroll "+c+" has no response from autoget before"),e.vast.getContent(h.prerolls[c].url,!0,c),!1);e.controls(!0),e.off("timeupdate",e.vast.timeupdate),e.off("ended",e.vast.tearDown),e.ads.endLinearAdMode(),j.adPlaying=!1;try{e.play()}catch(d){console.log(d)}},e.vast.timeupdate=function(a){e.vast.notice.classList.add("active"),e.vast.notice.innerHTML="Quảng cáo sẽ tự tắt sau "+Math.ceil(e.remainingTime())+" giây",e.duration()>0&&h.skip>e.duration()&&(h.skip=e.duration());var b=Math.ceil(h.skip-e.currentTime());b>0?(10>b&&(b="0"+b),e.vast.skipButton.innerHTML=b):(e.vast.skipButton.classList.add("enabled"),e.vast.skipButton.innerHTML="tắt")},e.vast.countdown=function(a){},e.vast.createSourceObjects=function(a){var b,c,d={},e=["video/mp4","video/webm","video/ogv"];for(c=0;c<a.length;c++)b=a[c].mimeType,e.indexOf(b)>=0&&(void 0===d[b]&&(d[b]=[]),d[b].push({type:b,src:a[c].fileURL,width:a[c].width,height:a[c].height}));for(var f=[],g=0;g<e.length;g++)if(b=e[g],void 0!==d[b])for(c=0;c<d[b].length;c++)f.push(d[b][c]);return f},e.vast.createMarkers=function(b){var c,d,f=[];j.markerBreaks.forEach(function(g){d=g/b*100;var h=a.createEl("div",{className:"vgplayer-marker"});h.style.left=d+"%",e.controlBar.progressControl.el_.appendChild(h),f.push({div:c,time:g,position:d})})}};a.plugin("vast",d)}(window.vgplayer,window.DMVAST);